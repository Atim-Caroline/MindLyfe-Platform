
> auth-service@1.0.0 start:dev
> nest start --watch

[2J[3J[H[[90m1:13:28 PM[0m] Starting compilation in watch mode...

[[90m1:13:32 PM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +41ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPassportModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mThrottlerModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDiscoveryModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTerminusModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mScheduleModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSharedModule dependencies initialized[39m[38;5;3m +46ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mEventModule dependencies initialized[39m[38;5;3m +8ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mJwtModule dependencies initialized[39m[38;5;3m +0ms[39m
query: SELECT * FROM current_schema()
query: CREATE EXTENSION IF NOT EXISTS "uuid-ossp"
query: SELECT version();
query: START TRANSACTION
query: SELECT * FROM current_schema()
query: SELECT * FROM current_database()
query: SELECT "table_schema", "table_name", obj_description(('"' || "table_schema" || '"."' || "table_name" || '"')::regclass, 'pg_class') AS table_comment FROM "information_schema"."tables" WHERE ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session') OR ("table_schema" = 'public' AND "table_name" = 'payment')
query: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
query: SELECT columns.*, pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description, ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype", pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type" FROM "information_schema"."columns" LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr" ON "col_attr"."attname" = "columns"."column_name" AND "col_attr"."attrelid" = ( SELECT "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls" LEFT JOIN "pg_catalog"."pg_namespace" AS "ns" ON "ns"."oid" = "cls"."relnamespace" WHERE "cls"."relname" = "columns"."table_name" AND "ns"."nspname" = "columns"."table_schema" ) WHERE ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session') OR ("table_schema" = 'public' AND "table_name" = 'payment')
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name", "am"."amname" AS "index_type" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" INNER JOIN "pg_am" "am" ON "i"."relam" = "am"."oid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'public' AND "cl"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'payment')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='userType'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='role'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='method'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_usertype_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_role_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_method_enum'
query: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'typeorm_metadata'
query: COMMIT
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmCoreModule dependencies initialized[39m[38;5;3m +195ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSubscriptionModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mOrganizationModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSessionModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/api}:[39m[38;5;3m +108ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/health, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/ping, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/test-login, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthController {/api/auth}:[39m[38;5;3m +1ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/register, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/verify-email, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/login, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/refresh-token, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/logout, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/change-password, PATCH} route[39m[38;5;3m +1ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/forgot-password, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/reset-password, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-service-token, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/revoke-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/users/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mMfaController {/api/mfa}:[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/generate, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/enable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/disable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/verify, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserController {/api/users}:[39m[38;5;3m +1ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id/deactivate, PUT} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSessionController {/api/sessions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me/:sessionId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, DELETE} route[39m[38;5;3m +1ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSubscriptionController {/api/api/subscriptions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/api/subscriptions/plans, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/api/subscriptions/status, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/api/subscriptions/create, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/api/subscriptions/credits/purchase, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/api/subscriptions/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/api/subscriptions/session/:sessionId/use, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mOrganizationController {/api/api/organizations}:[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/api/organizations/create, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/api/organizations/:organizationId/subscription, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/api/organizations/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/api/organizations/:organizationId/users/add, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/api/organizations/:organizationId/users/:userId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/api/organizations/:organizationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/api/organizations/my/organization, GET} route[39m[38;5;3m +0ms[39m
Redis connection established
[32m[Nest] 13345  - [39m05/26/2025, 1:13:35 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +17ms[39m
Auth service is running on port 3002 and bound to all interfaces
[95m[Nest] 13345  - [39m05/26/2025, 1:14:31 PM [95m  DEBUG[39m [38;5;3m[AuthSecurity] [39m[95mPOST /api/auth/register - 127.0.0.1 - curl/8.7.1[39m
[33m[Nest] 13345  - [39m05/26/2025, 1:14:31 PM [33m   WARN[39m [38;5;3m[AuthSecurity] [39m[33mPOST /api/auth/register 400 - 127.0.0.1 - curl/8.7.1 - 158[39m
[95m[Nest] 13345  - [39m05/26/2025, 1:14:36 PM [95m  DEBUG[39m [38;5;3m[AuthSecurity] [39m[95mPOST /api/auth/login - 127.0.0.1 - curl/8.7.1[39m
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."email" = $1)) LIMIT 1 -- PARAMETERS: ["test@example.com"]
[33m[Nest] 13345  - [39m05/26/2025, 1:14:36 PM [33m   WARN[39m [38;5;3m[AuthService] [39m[33mLogin attempt with non-existent email: test@example.com[39m
[95m[Nest] 13345  - [39m05/26/2025, 1:14:36 PM [95m  DEBUG[39m [38;5;3m[EventService] [39m[95m[EVENT EMITTED] auth.login.failed[39m
[95m[Nest] 13345  - [39m05/26/2025, 1:14:36 PM [95m  DEBUG[39m [38;5;3m[EventService] [39m[95mObject:[39m
{
  "event": {
    "type": "auth.login.failed",
    "payload": {
      "email": "test@example.com",
      "reason": "User not found"
    },
    "metadata": {
      "metadata": {
        "userAgent": "curl/8.7.1",
        "deviceInfo": "curl/8.7.1"
      },
      "timestamp": "2025-05-26T10:14:36.945Z"
    }
  }
}

[33m[Nest] 13345  - [39m05/26/2025, 1:14:36 PM [33m   WARN[39m [38;5;3m[AuthSecurity] [39m[33mPOST /api/auth/login 401 - 127.0.0.1 - curl/8.7.1 - 73[39m
[95m[Nest] 13345  - [39m05/26/2025, 1:15:44 PM [95m  DEBUG[39m [38;5;3m[AuthSecurity] [39m[95mPOST /api/auth/register - 127.0.0.1 - curl/8.7.1[39m
[33m[Nest] 13345  - [39m05/26/2025, 1:15:44 PM [33m   WARN[39m [38;5;3m[AuthSecurity] [39m[33mPOST /api/auth/register 400 - 127.0.0.1 - curl/8.7.1 - 158[39m
[95m[Nest] 13345  - [39m05/26/2025, 1:15:48 PM [95m  DEBUG[39m [38;5;3m[AuthSecurity] [39m[95mPOST /api/auth/login - 127.0.0.1 - curl/8.7.1[39m
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."email" = $1)) LIMIT 1 -- PARAMETERS: ["test@example.com"]
[33m[Nest] 13345  - [39m05/26/2025, 1:15:48 PM [33m   WARN[39m [38;5;3m[AuthService] [39m[33mLogin attempt with non-existent email: test@example.com[39m
[95m[Nest] 13345  - [39m05/26/2025, 1:15:48 PM [95m  DEBUG[39m [38;5;3m[EventService] [39m[95m[EVENT EMITTED] auth.login.failed[39m
[95m[Nest] 13345  - [39m05/26/2025, 1:15:48 PM [95m  DEBUG[39m [38;5;3m[EventService] [39m[95mObject:[39m
{
  "event": {
    "type": "auth.login.failed",
    "payload": {
      "email": "test@example.com",
      "reason": "User not found"
    },
    "metadata": {
      "metadata": {
        "userAgent": "curl/8.7.1",
        "deviceInfo": "curl/8.7.1"
      },
      "timestamp": "2025-05-26T10:15:48.850Z"
    }
  }
}

[33m[Nest] 13345  - [39m05/26/2025, 1:15:48 PM [33m   WARN[39m [38;5;3m[AuthSecurity] [39m[33mPOST /api/auth/login 401 - 127.0.0.1 - curl/8.7.1 - 73[39m
[95m[Nest] 13345  - [39m05/26/2025, 1:16:39 PM [95m  DEBUG[39m [38;5;3m[AuthSecurity] [39m[95mPOST /api/auth/register - 127.0.0.1 - curl/8.7.1[39m
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."email" = $1)) LIMIT 1 -- PARAMETERS: ["test@example.com"]
query: START TRANSACTION
query: INSERT INTO "user"("id", "email", "password", "firstName", "lastName", "phoneNumber", "role", "status", "userType", "emailVerified", "verificationToken", "resetPasswordToken", "resetPasswordExpires", "twoFactorEnabled", "twoFactorSecret", "lastLogin", "organizationId", "dateOfBirth", "isMinor", "guardianEmail", "guardianPhone", "createdAt", "updatedAt") VALUES (DEFAULT, $1, $2, $3, $4, DEFAULT, $5, $6, DEFAULT, $7, $8, DEFAULT, DEFAULT, $9, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING "id", "role", "status", "userType", "emailVerified", "twoFactorEnabled", "isMinor", "createdAt", "updatedAt" -- PARAMETERS: ["test@example.com","$2b$10$eW.JueABpJyxqM/RY89c5OT/Gqp8eSsYRcNO.sbI02.SFrtIkf2OG","Test","User","user","pending",0,"9c538893-889a-49c7-9140-e0eb66b367ef",0]
query: COMMIT
[95m[Nest] 13345  - [39m05/26/2025, 1:16:39 PM [95m  DEBUG[39m [38;5;3m[EmailService] [39m[95m[DEV MODE] Sending verification email to test@example.com[39m
[95m[Nest] 13345  - [39m05/26/2025, 1:16:39 PM [95m  DEBUG[39m [38;5;3m[EmailService] [39m[95mVerification URL: http://localhost:3000/verify-email?token=9c538893-889a-49c7-9140-e0eb66b367ef[39m
[32m[Nest] 13345  - [39m05/26/2025, 1:16:39 PM [32m    LOG[39m [38;5;3m[AuthService] [39m[32mVerification email sent to test@example.com[39m
[95m[Nest] 13345  - [39m05/26/2025, 1:16:39 PM [95m  DEBUG[39m [38;5;3m[EventService] [39m[95m[EVENT EMITTED] user.created[39m
[95m[Nest] 13345  - [39m05/26/2025, 1:16:39 PM [95m  DEBUG[39m [38;5;3m[EventService] [39m[95mObject:[39m
{
  "event": {
    "type": "user.created",
    "payload": {
      "userId": "9b00ca02-d973-4489-a031-770590b7c6a3",
      "email": "test@example.com"
    },
    "metadata": {
      "userId": "9b00ca02-d973-4489-a031-770590b7c6a3",
      "metadata": {
        "userAgent": "curl/8.7.1"
      },
      "timestamp": "2025-05-26T10:16:39.487Z"
    }
  }
}

[95m[Nest] 13345  - [39m05/26/2025, 1:16:39 PM [95m  DEBUG[39m [38;5;3m[EventService] [39m[95m[EVENT EMITTED] email.verification.sent[39m
[95m[Nest] 13345  - [39m05/26/2025, 1:16:39 PM [95m  DEBUG[39m [38;5;3m[EventService] [39m[95mObject:[39m
{
  "event": {
    "type": "email.verification.sent",
    "payload": {
      "userId": "9b00ca02-d973-4489-a031-770590b7c6a3",
      "email": "test@example.com"
    },
    "metadata": {
      "userId": "9b00ca02-d973-4489-a031-770590b7c6a3",
      "metadata": {
        "userAgent": "curl/8.7.1"
      },
      "timestamp": "2025-05-26T10:16:39.487Z"
    }
  }
}

[31m[Nest] 13345  - [39m05/26/2025, 1:16:44 PM [31m  ERROR[39m [38;5;3m[AuthService] [39m[31mFailed to send welcome notification: getaddrinfo ENOTFOUND notification-service[39m
Error: getaddrinfo ENOTFOUND notification-service
    at Function.AxiosError.from (/Users/mac/Downloads/Mindlyf/backend/node_modules/axios/lib/core/AxiosError.js:92:14)
    at RedirectableRequest.handleRequestError (/Users/mac/Downloads/Mindlyf/backend/node_modules/axios/lib/adapters/http.js:620:25)
    at RedirectableRequest.emit (node:events:519:28)
    at eventHandlers.<computed> (/Users/mac/Downloads/Mindlyf/backend/node_modules/follow-redirects/index.js:49:24)
    at ClientRequest.emit (node:events:519:28)
    at emitErrorEvent (node:_http_client:108:11)
    at Socket.socketErrorListener (node:_http_client:511:5)
    at Socket.emit (node:events:519:28)
    at emitErrorNT (node:internal/streams/destroy:169:8)
    at emitErrorCloseNT (node:internal/streams/destroy:128:3)
    at Axios.request (/Users/mac/Downloads/Mindlyf/backend/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
[95m[Nest] 13345  - [39m05/26/2025, 1:16:44 PM [95m  DEBUG[39m [38;5;3m[AuthSecurity] [39m[95mPOST /api/auth/register 201 - 127.0.0.1 - curl/8.7.1 - 134[39m
[95m[Nest] 13345  - [39m05/26/2025, 1:16:55 PM [95m  DEBUG[39m [38;5;3m[AuthSecurity] [39m[95mPOST /api/auth/login - 127.0.0.1 - curl/8.7.1[39m
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."email" = $1)) LIMIT 1 -- PARAMETERS: ["test@example.com"]
[33m[Nest] 13345  - [39m05/26/2025, 1:16:55 PM [33m   WARN[39m [38;5;3m[AuthService] [39m[33mLogin attempt with unverified email: test@example.com[39m
[33m[Nest] 13345  - [39m05/26/2025, 1:16:55 PM [33m   WARN[39m [38;5;3m[AuthSecurity] [39m[33mPOST /api/auth/login 401 - 127.0.0.1 - curl/8.7.1 - 128[39m
[95m[Nest] 13345  - [39m05/26/2025, 1:17:43 PM [95m  DEBUG[39m [38;5;3m[AuthSecurity] [39m[95mPOST /api/auth/login - 127.0.0.1 - curl/8.7.1[39m
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."email" = $1)) LIMIT 1 -- PARAMETERS: ["test@example.com"]
[33m[Nest] 13345  - [39m05/26/2025, 1:17:43 PM [33m   WARN[39m [38;5;3m[AuthService] [39m[33mLogin attempt with inactive account: 9b00ca02-d973-4489-a031-770590b7c6a3[39m
[33m[Nest] 13345  - [39m05/26/2025, 1:17:43 PM [33m   WARN[39m [38;5;3m[AuthSecurity] [39m[33mPOST /api/auth/login 401 - 127.0.0.1 - curl/8.7.1 - 75[39m
[95m[Nest] 13345  - [39m05/26/2025, 1:18:03 PM [95m  DEBUG[39m [38;5;3m[AuthSecurity] [39m[95mPOST /api/auth/login - 127.0.0.1 - curl/8.7.1[39m
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."email" = $1)) LIMIT 1 -- PARAMETERS: ["test@example.com"]
query: SELECT "UserSession"."id" AS "UserSession_id", "UserSession"."userId" AS "UserSession_userId", "UserSession"."refreshToken" AS "UserSession_refreshToken", "UserSession"."ipAddress" AS "UserSession_ipAddress", "UserSession"."userAgent" AS "UserSession_userAgent", "UserSession"."deviceInfo" AS "UserSession_deviceInfo", "UserSession"."lastUsedAt" AS "UserSession_lastUsedAt", "UserSession"."isRevoked" AS "UserSession_isRevoked", "UserSession"."revokedAt" AS "UserSession_revokedAt", "UserSession"."revokedReason" AS "UserSession_revokedReason", "UserSession"."status" AS "UserSession_status", "UserSession"."endedAt" AS "UserSession_endedAt", "UserSession"."createdAt" AS "UserSession_createdAt", "UserSession"."updatedAt" AS "UserSession_updatedAt", "UserSession"."expiresAt" AS "UserSession_expiresAt" FROM "user_session" "UserSession" WHERE (("UserSession"."id" = $1)) LIMIT 1 -- PARAMETERS: ["980953dd-a7c3-4044-a787-e14f0ed6fa9d"]
query: SELECT "UserSession"."id" AS "UserSession_id", "UserSession"."userId" AS "UserSession_userId", "UserSession"."refreshToken" AS "UserSession_refreshToken", "UserSession"."ipAddress" AS "UserSession_ipAddress", "UserSession"."userAgent" AS "UserSession_userAgent", "UserSession"."deviceInfo" AS "UserSession_deviceInfo", "UserSession"."lastUsedAt" AS "UserSession_lastUsedAt", "UserSession"."isRevoked" AS "UserSession_isRevoked", "UserSession"."revokedAt" AS "UserSession_revokedAt", "UserSession"."revokedReason" AS "UserSession_revokedReason", "UserSession"."status" AS "UserSession_status", "UserSession"."endedAt" AS "UserSession_endedAt", "UserSession"."createdAt" AS "UserSession_createdAt", "UserSession"."updatedAt" AS "UserSession_updatedAt", "UserSession"."expiresAt" AS "UserSession_expiresAt" FROM "user_session" "UserSession" WHERE "UserSession"."id" IN ($1) -- PARAMETERS: ["980953dd-a7c3-4044-a787-e14f0ed6fa9d"]
query: START TRANSACTION
query: INSERT INTO "user_session"("id", "userId", "refreshToken", "ipAddress", "userAgent", "deviceInfo", "lastUsedAt", "isRevoked", "revokedAt", "revokedReason", "status", "endedAt", "createdAt", "updatedAt", "expiresAt") VALUES ($1, $2, $3, DEFAULT, $4, $5, $6, $7, DEFAULT, DEFAULT, DEFAULT, DEFAULT, $8, $9, $10) RETURNING "id", "isRevoked", "status", "createdAt", "updatedAt" -- PARAMETERS: ["980953dd-a7c3-4044-a787-e14f0ed6fa9d","9b00ca02-d973-4489-a031-770590b7c6a3","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI5YjAwY2EwMi1kOTczLTQ0ODktYTAzMS03NzA1OTBiN2M2YTMiLCJlbWFpbCI6InRlc3RAZXhhbXBsZS5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc0ODI1NDY4NCwiZXhwIjoxNzQ4ODU5NDg0fQ.CFTzJnLNm_O2Rq_DOKvYmKkPrOtQ6_1X2t6EEKtnGzo","curl/8.7.1","curl/8.7.1","2025-05-26T10:18:04.063Z",0,"2025-05-26T10:18:04.063Z","2025-05-26T10:18:04.063Z","2025-06-02T10:18:04.063Z"]
query: COMMIT
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."id" = $1)) LIMIT 1 -- PARAMETERS: ["9b00ca02-d973-4489-a031-770590b7c6a3"]
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE "User"."id" IN ($1) -- PARAMETERS: ["9b00ca02-d973-4489-a031-770590b7c6a3"]
query: START TRANSACTION
query: UPDATE "user" SET "lastLogin" = $1, "updatedAt" = CURRENT_TIMESTAMP WHERE "id" IN ($2) RETURNING "updatedAt" -- PARAMETERS: ["2025-05-26T10:18:04.080Z","9b00ca02-d973-4489-a031-770590b7c6a3"]
query: COMMIT
[95m[Nest] 13345  - [39m05/26/2025, 1:18:04 PM [95m  DEBUG[39m [38;5;3m[EventService] [39m[95m[EVENT EMITTED] auth.login.success[39m
[95m[Nest] 13345  - [39m05/26/2025, 1:18:04 PM [95m  DEBUG[39m [38;5;3m[EventService] [39m[95mObject:[39m
{
  "event": {
    "type": "auth.login.success",
    "payload": {
      "userId": "9b00ca02-d973-4489-a031-770590b7c6a3",
      "sessionId": "980953dd-a7c3-4044-a787-e14f0ed6fa9d"
    },
    "metadata": {
      "userId": "9b00ca02-d973-4489-a031-770590b7c6a3",
      "metadata": {
        "userAgent": "curl/8.7.1",
        "deviceInfo": "curl/8.7.1"
      },
      "timestamp": "2025-05-26T10:18:04.089Z"
    }
  }
}

[95m[Nest] 13345  - [39m05/26/2025, 1:18:04 PM [95m  DEBUG[39m [38;5;3m[AuthSecurity] [39m[95mPOST /api/auth/login 200 - 127.0.0.1 - curl/8.7.1 - 699[39m
[2J[3J[H[[90m1:19:07 PM[0m] File change detected. Starting incremental compilation...

[[90m1:19:09 PM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 15238  - [39m05/26/2025, 1:19:13 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +43ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPassportModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mThrottlerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDiscoveryModule dependencies initialized[39m[38;5;3m +3ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTerminusModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mScheduleModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSharedModule dependencies initialized[39m[38;5;3m +43ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mEventModule dependencies initialized[39m[38;5;3m +9ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mJwtModule dependencies initialized[39m[38;5;3m +0ms[39m
query: SELECT * FROM current_schema()
query: CREATE EXTENSION IF NOT EXISTS "uuid-ossp"
query: SELECT version();
query: START TRANSACTION
query: SELECT * FROM current_schema()
query: SELECT * FROM current_database()
query: SELECT "table_schema", "table_name", obj_description(('"' || "table_schema" || '"."' || "table_name" || '"')::regclass, 'pg_class') AS table_comment FROM "information_schema"."tables" WHERE ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session') OR ("table_schema" = 'public' AND "table_name" = 'payment')
query: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
query: SELECT columns.*, pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description, ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype", pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type" FROM "information_schema"."columns" LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr" ON "col_attr"."attname" = "columns"."column_name" AND "col_attr"."attrelid" = ( SELECT "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls" LEFT JOIN "pg_catalog"."pg_namespace" AS "ns" ON "ns"."oid" = "cls"."relnamespace" WHERE "cls"."relname" = "columns"."table_name" AND "ns"."nspname" = "columns"."table_schema" ) WHERE ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session') OR ("table_schema" = 'public' AND "table_name" = 'payment')
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name", "am"."amname" AS "index_type" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" INNER JOIN "pg_am" "am" ON "i"."relam" = "am"."oid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'public' AND "cl"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'payment')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='userType'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='role'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='method'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_usertype_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_role_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_method_enum'
query: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'typeorm_metadata'
query: COMMIT
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmCoreModule dependencies initialized[39m[38;5;3m +390ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSubscriptionModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mOrganizationModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSessionModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/api}:[39m[38;5;3m +107ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/health, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/ping, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/test-login, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthController {/api/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/register, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/verify-email, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/login, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/refresh-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/logout, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/change-password, PATCH} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/forgot-password, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/reset-password, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/me, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-service-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/revoke-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/users/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mMfaController {/api/mfa}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/generate, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/enable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/disable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/verify, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserController {/api/users}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id/deactivate, PUT} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSessionController {/api/sessions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me/:sessionId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSubscriptionController {/api/subscriptions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/plans, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/status, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/create, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/credits/purchase, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/payment/:paymentId/confirm, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/session/:sessionId/use, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mOrganizationController {/api/api/organizations}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/api/organizations/create, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/api/organizations/:organizationId/subscription, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/api/organizations/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/api/organizations/:organizationId/users/add, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/api/organizations/:organizationId/users/:userId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/api/organizations/:organizationId, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/api/organizations/my/organization, GET} route[39m[38;5;3m +0ms[39m
Redis connection established
[32m[Nest] 15238  - [39m05/26/2025, 1:19:14 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +18ms[39m
Auth service is running on port 3002 and bound to all interfaces
[2J[3J[H[[90m1:19:44 PM[0m] File change detected. Starting incremental compilation...

[[90m1:19:45 PM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 15447  - [39m05/26/2025, 1:19:48 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:48 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +42ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:48 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPassportModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:48 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mThrottlerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:48 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:48 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:48 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:48 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDiscoveryModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:48 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTerminusModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:48 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:48 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:48 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mScheduleModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:48 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSharedModule dependencies initialized[39m[38;5;3m +37ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:48 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mEventModule dependencies initialized[39m[38;5;3m +8ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:48 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mJwtModule dependencies initialized[39m[38;5;3m +0ms[39m
query: SELECT * FROM current_schema()
query: CREATE EXTENSION IF NOT EXISTS "uuid-ossp"
query: SELECT version();
query: START TRANSACTION
query: SELECT * FROM current_schema()
query: SELECT * FROM current_database()
query: SELECT "table_schema", "table_name", obj_description(('"' || "table_schema" || '"."' || "table_name" || '"')::regclass, 'pg_class') AS table_comment FROM "information_schema"."tables" WHERE ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session') OR ("table_schema" = 'public' AND "table_name" = 'payment')
query: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
query: SELECT columns.*, pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description, ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype", pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type" FROM "information_schema"."columns" LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr" ON "col_attr"."attname" = "columns"."column_name" AND "col_attr"."attrelid" = ( SELECT "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls" LEFT JOIN "pg_catalog"."pg_namespace" AS "ns" ON "ns"."oid" = "cls"."relnamespace" WHERE "cls"."relname" = "columns"."table_name" AND "ns"."nspname" = "columns"."table_schema" ) WHERE ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session') OR ("table_schema" = 'public' AND "table_name" = 'payment')
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name", "am"."amname" AS "index_type" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" INNER JOIN "pg_am" "am" ON "i"."relam" = "am"."oid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'public' AND "cl"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'payment')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='userType'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='role'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='method'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_usertype_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_role_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_method_enum'
query: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'typeorm_metadata'
query: COMMIT
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmCoreModule dependencies initialized[39m[38;5;3m +235ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSubscriptionModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mOrganizationModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSessionModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/api}:[39m[38;5;3m +82ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/health, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/ping, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/test-login, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthController {/api/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/register, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/verify-email, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/login, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/refresh-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/logout, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/change-password, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/forgot-password, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/reset-password, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-service-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/revoke-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/users/:userId, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mMfaController {/api/mfa}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/generate, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/enable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/disable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/verify, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserController {/api/users}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id/deactivate, PUT} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSessionController {/api/sessions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me/:sessionId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSubscriptionController {/api/subscriptions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/plans, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/status, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/create, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/credits/purchase, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/session/:sessionId/use, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mOrganizationController {/api/organizations}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/create, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/subscription, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/users/add, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/users/:userId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/my/organization, GET} route[39m[38;5;3m +1ms[39m
Redis connection established
[32m[Nest] 15447  - [39m05/26/2025, 1:19:49 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +24ms[39m
Auth service is running on port 3002 and bound to all interfaces
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."id" = $1)) LIMIT 1 -- PARAMETERS: ["9b00ca02-d973-4489-a031-770590b7c6a3"]
query: SELECT DISTINCT "distinctAlias"."User_id" AS "ids_User_id" FROM (SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt", "User__User_organization"."id" AS "User__User_organization_id", "User__User_organization"."name" AS "User__User_organization_name", "User__User_organization"."description" AS "User__User_organization_description", "User__User_organization"."email" AS "User__User_organization_email", "User__User_organization"."phoneNumber" AS "User__User_organization_phoneNumber", "User__User_organization"."address" AS "User__User_organization_address", "User__User_organization"."status" AS "User__User_organization_status", "User__User_organization"."maxUsers" AS "User__User_organization_maxUsers", "User__User_organization"."currentUsers" AS "User__User_organization_currentUsers", "User__User_organization"."pricePerUser" AS "User__User_organization_pricePerUser", "User__User_organization"."sessionsPerUser" AS "User__User_organization_sessionsPerUser", "User__User_organization"."subscriptionStartDate" AS "User__User_organization_subscriptionStartDate", "User__User_organization"."subscriptionEndDate" AS "User__User_organization_subscriptionEndDate", "User__User_organization"."isActive" AS "User__User_organization_isActive", "User__User_organization"."createdAt" AS "User__User_organization_createdAt", "User__User_organization"."updatedAt" AS "User__User_organization_updatedAt" FROM "user" "User" LEFT JOIN "organization" "User__User_organization" ON "User__User_organization"."id"="User"."organizationId") "distinctAlias" ORDER BY "User_id" ASC LIMIT 1
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt", "User__User_organization"."id" AS "User__User_organization_id", "User__User_organization"."name" AS "User__User_organization_name", "User__User_organization"."description" AS "User__User_organization_description", "User__User_organization"."email" AS "User__User_organization_email", "User__User_organization"."phoneNumber" AS "User__User_organization_phoneNumber", "User__User_organization"."address" AS "User__User_organization_address", "User__User_organization"."status" AS "User__User_organization_status", "User__User_organization"."maxUsers" AS "User__User_organization_maxUsers", "User__User_organization"."currentUsers" AS "User__User_organization_currentUsers", "User__User_organization"."pricePerUser" AS "User__User_organization_pricePerUser", "User__User_organization"."sessionsPerUser" AS "User__User_organization_sessionsPerUser", "User__User_organization"."subscriptionStartDate" AS "User__User_organization_subscriptionStartDate", "User__User_organization"."subscriptionEndDate" AS "User__User_organization_subscriptionEndDate", "User__User_organization"."isActive" AS "User__User_organization_isActive", "User__User_organization"."createdAt" AS "User__User_organization_createdAt", "User__User_organization"."updatedAt" AS "User__User_organization_updatedAt" FROM "user" "User" LEFT JOIN "organization" "User__User_organization" ON "User__User_organization"."id"="User"."organizationId" WHERE "User"."id" IN ($1) -- PARAMETERS: ["9b00ca02-d973-4489-a031-770590b7c6a3"]
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."id" = $1)) LIMIT 1 -- PARAMETERS: ["9b00ca02-d973-4489-a031-770590b7c6a3"]
query: SELECT DISTINCT "distinctAlias"."User_id" AS "ids_User_id" FROM (SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt", "User__User_subscriptions"."id" AS "User__User_subscriptions_id", "User__User_subscriptions"."userId" AS "User__User_subscriptions_userId", "User__User_subscriptions"."type" AS "User__User_subscriptions_type", "User__User_subscriptions"."status" AS "User__User_subscriptions_status", "User__User_subscriptions"."amount" AS "User__User_subscriptions_amount", "User__User_subscriptions"."sessionsIncluded" AS "User__User_subscriptions_sessionsIncluded", "User__User_subscriptions"."sessionsUsed" AS "User__User_subscriptions_sessionsUsed", "User__User_subscriptions"."creditsAvailable" AS "User__User_subscriptions_creditsAvailable", "User__User_subscriptions"."startDate" AS "User__User_subscriptions_startDate", "User__User_subscriptions"."endDate" AS "User__User_subscriptions_endDate", "User__User_subscriptions"."lastSessionDate" AS "User__User_subscriptions_lastSessionDate", "User__User_subscriptions"."autoRenew" AS "User__User_subscriptions_autoRenew", "User__User_subscriptions"."paymentReference" AS "User__User_subscriptions_paymentReference", "User__User_subscriptions"."notes" AS "User__User_subscriptions_notes", "User__User_subscriptions"."createdAt" AS "User__User_subscriptions_createdAt", "User__User_subscriptions"."updatedAt" AS "User__User_subscriptions_updatedAt", "User__User_organization"."id" AS "User__User_organization_id", "User__User_organization"."name" AS "User__User_organization_name", "User__User_organization"."description" AS "User__User_organization_description", "User__User_organization"."email" AS "User__User_organization_email", "User__User_organization"."phoneNumber" AS "User__User_organization_phoneNumber", "User__User_organization"."address" AS "User__User_organization_address", "User__User_organization"."status" AS "User__User_organization_status", "User__User_organization"."maxUsers" AS "User__User_organization_maxUsers", "User__User_organization"."currentUsers" AS "User__User_organization_currentUsers", "User__User_organization"."pricePerUser" AS "User__User_organization_pricePerUser", "User__User_organization"."sessionsPerUser" AS "User__User_organization_sessionsPerUser", "User__User_organization"."subscriptionStartDate" AS "User__User_organization_subscriptionStartDate", "User__User_organization"."subscriptionEndDate" AS "User__User_organization_subscriptionEndDate", "User__User_organization"."isActive" AS "User__User_organization_isActive", "User__User_organization"."createdAt" AS "User__User_organization_createdAt", "User__User_organization"."updatedAt" AS "User__User_organization_updatedAt" FROM "user" "User" LEFT JOIN "subscription" "User__User_subscriptions" ON "User__User_subscriptions"."userId"="User"."id"  LEFT JOIN "organization" "User__User_organization" ON "User__User_organization"."id"="User"."organizationId") "distinctAlias" ORDER BY "User_id" ASC LIMIT 1
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt", "User__User_subscriptions"."id" AS "User__User_subscriptions_id", "User__User_subscriptions"."userId" AS "User__User_subscriptions_userId", "User__User_subscriptions"."type" AS "User__User_subscriptions_type", "User__User_subscriptions"."status" AS "User__User_subscriptions_status", "User__User_subscriptions"."amount" AS "User__User_subscriptions_amount", "User__User_subscriptions"."sessionsIncluded" AS "User__User_subscriptions_sessionsIncluded", "User__User_subscriptions"."sessionsUsed" AS "User__User_subscriptions_sessionsUsed", "User__User_subscriptions"."creditsAvailable" AS "User__User_subscriptions_creditsAvailable", "User__User_subscriptions"."startDate" AS "User__User_subscriptions_startDate", "User__User_subscriptions"."endDate" AS "User__User_subscriptions_endDate", "User__User_subscriptions"."lastSessionDate" AS "User__User_subscriptions_lastSessionDate", "User__User_subscriptions"."autoRenew" AS "User__User_subscriptions_autoRenew", "User__User_subscriptions"."paymentReference" AS "User__User_subscriptions_paymentReference", "User__User_subscriptions"."notes" AS "User__User_subscriptions_notes", "User__User_subscriptions"."createdAt" AS "User__User_subscriptions_createdAt", "User__User_subscriptions"."updatedAt" AS "User__User_subscriptions_updatedAt", "User__User_organization"."id" AS "User__User_organization_id", "User__User_organization"."name" AS "User__User_organization_name", "User__User_organization"."description" AS "User__User_organization_description", "User__User_organization"."email" AS "User__User_organization_email", "User__User_organization"."phoneNumber" AS "User__User_organization_phoneNumber", "User__User_organization"."address" AS "User__User_organization_address", "User__User_organization"."status" AS "User__User_organization_status", "User__User_organization"."maxUsers" AS "User__User_organization_maxUsers", "User__User_organization"."currentUsers" AS "User__User_organization_currentUsers", "User__User_organization"."pricePerUser" AS "User__User_organization_pricePerUser", "User__User_organization"."sessionsPerUser" AS "User__User_organization_sessionsPerUser", "User__User_organization"."subscriptionStartDate" AS "User__User_organization_subscriptionStartDate", "User__User_organization"."subscriptionEndDate" AS "User__User_organization_subscriptionEndDate", "User__User_organization"."isActive" AS "User__User_organization_isActive", "User__User_organization"."createdAt" AS "User__User_organization_createdAt", "User__User_organization"."updatedAt" AS "User__User_organization_updatedAt" FROM "user" "User" LEFT JOIN "subscription" "User__User_subscriptions" ON "User__User_subscriptions"."userId"="User"."id"  LEFT JOIN "organization" "User__User_organization" ON "User__User_organization"."id"="User"."organizationId" WHERE "User"."id" IN ($1) -- PARAMETERS: ["9b00ca02-d973-4489-a031-770590b7c6a3"]
query: SELECT "TherapySession"."id" AS "TherapySession_id", "TherapySession"."userId" AS "TherapySession_userId", "TherapySession"."therapistId" AS "TherapySession_therapistId", "TherapySession"."subscriptionId" AS "TherapySession_subscriptionId", "TherapySession"."status" AS "TherapySession_status", "TherapySession"."type" AS "TherapySession_type", "TherapySession"."scheduledAt" AS "TherapySession_scheduledAt", "TherapySession"."startedAt" AS "TherapySession_startedAt", "TherapySession"."endedAt" AS "TherapySession_endedAt", "TherapySession"."durationMinutes" AS "TherapySession_durationMinutes", "TherapySession"."cost" AS "TherapySession_cost", "TherapySession"."paidFromCredit" AS "TherapySession_paidFromCredit", "TherapySession"."paidFromSubscription" AS "TherapySession_paidFromSubscription", "TherapySession"."paymentReference" AS "TherapySession_paymentReference", "TherapySession"."notes" AS "TherapySession_notes", "TherapySession"."cancellationReason" AS "TherapySession_cancellationReason", "TherapySession"."meetingLink" AS "TherapySession_meetingLink", "TherapySession"."meetingId" AS "TherapySession_meetingId", "TherapySession"."createdAt" AS "TherapySession_createdAt", "TherapySession"."updatedAt" AS "TherapySession_updatedAt" FROM "therapy_session" "TherapySession" WHERE (("TherapySession"."status" = $1)) ORDER BY "TherapySession"."scheduledAt" DESC LIMIT 1 -- PARAMETERS: ["completed"]
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."id" = $1)) LIMIT 1 -- PARAMETERS: ["9b00ca02-d973-4489-a031-770590b7c6a3"]
[2J[3J[H[[90m1:24:32 PM[0m] File change detected. Starting incremental compilation...

[96msrc/organization/organization.controller.ts[0m:[93m104[0m:[93m43[0m - [91merror[0m[90m TS2551: [0mProperty 'getUserOrganization' does not exist on type 'OrganizationService'. Did you mean 'createOrganization'?

[7m104[0m     return await this.organizationService.getUserOrganization(req.user.id);
[7m   [0m [91m                                          ~~~~~~~~~~~~~~~~~~~[0m

  [96msrc/organization/organization.service.ts[0m:[93m45[0m:[93m9[0m
    [7m45[0m   async createOrganization(createDto: CreateOrganizationDto): Promise<Organization> {
    [7m  [0m [96m        ~~~~~~~~~~~~~~~~~~[0m
    'createOrganization' is declared here.

[[90m1:24:33 PM[0m] Found 1 error. Watching for file changes.

[2J[3J[H[[90m1:24:50 PM[0m] File change detected. Starting incremental compilation...

[[90m1:24:52 PM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +44ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPassportModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mThrottlerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDiscoveryModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTerminusModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mScheduleModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSharedModule dependencies initialized[39m[38;5;3m +34ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mEventModule dependencies initialized[39m[38;5;3m +12ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mJwtModule dependencies initialized[39m[38;5;3m +0ms[39m
query: SELECT * FROM current_schema()
query: CREATE EXTENSION IF NOT EXISTS "uuid-ossp"
query: SELECT version();
query: START TRANSACTION
query: SELECT * FROM current_schema()
query: SELECT * FROM current_database()
query: SELECT "table_schema", "table_name", obj_description(('"' || "table_schema" || '"."' || "table_name" || '"')::regclass, 'pg_class') AS table_comment FROM "information_schema"."tables" WHERE ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session') OR ("table_schema" = 'public' AND "table_name" = 'payment')
query: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
query: SELECT columns.*, pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description, ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype", pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type" FROM "information_schema"."columns" LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr" ON "col_attr"."attname" = "columns"."column_name" AND "col_attr"."attrelid" = ( SELECT "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls" LEFT JOIN "pg_catalog"."pg_namespace" AS "ns" ON "ns"."oid" = "cls"."relnamespace" WHERE "cls"."relname" = "columns"."table_name" AND "ns"."nspname" = "columns"."table_schema" ) WHERE ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session') OR ("table_schema" = 'public' AND "table_name" = 'payment')
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name", "am"."amname" AS "index_type" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" INNER JOIN "pg_am" "am" ON "i"."relam" = "am"."oid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'public' AND "cl"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'payment')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='userType'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='role'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='method'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_usertype_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_role_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_method_enum'
query: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'typeorm_metadata'
query: COMMIT
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmCoreModule dependencies initialized[39m[38;5;3m +196ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSubscriptionModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mOrganizationModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSessionModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/api}:[39m[38;5;3m +90ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/health, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/ping, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/test-login, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthController {/api/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/register, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/verify-email, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/login, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/refresh-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/logout, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/change-password, PATCH} route[39m[38;5;3m +1ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/forgot-password, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/reset-password, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/me, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-service-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/revoke-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/users/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mMfaController {/api/mfa}:[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/generate, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/enable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/disable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/verify, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserController {/api/users}:[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id/deactivate, PUT} route[39m[38;5;3m +1ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSessionController {/api/sessions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me/:sessionId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, DELETE} route[39m[38;5;3m +1ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSubscriptionController {/api/subscriptions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/plans, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/status, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/create, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/credits/purchase, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/session/:sessionId/use, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mOrganizationController {/api/organizations}:[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/create, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/subscription, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/users/add, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/users/:userId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/my/organization, GET} route[39m[38;5;3m +0ms[39m
Redis connection established
[32m[Nest] 17014  - [39m05/26/2025, 1:24:55 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +17ms[39m
Auth service is running on port 3002 and bound to all interfaces
[2J[3J[H[[90m1:26:19 PM[0m] File change detected. Starting incremental compilation...

[[90m1:26:20 PM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +42ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPassportModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mThrottlerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDiscoveryModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTerminusModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mScheduleModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSharedModule dependencies initialized[39m[38;5;3m +52ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mEventModule dependencies initialized[39m[38;5;3m +8ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mJwtModule dependencies initialized[39m[38;5;3m +1ms[39m
query: SELECT * FROM current_schema()
query: CREATE EXTENSION IF NOT EXISTS "uuid-ossp"
query: SELECT version();
query: START TRANSACTION
query: SELECT * FROM current_schema()
query: SELECT * FROM current_database()
query: SELECT "table_schema", "table_name", obj_description(('"' || "table_schema" || '"."' || "table_name" || '"')::regclass, 'pg_class') AS table_comment FROM "information_schema"."tables" WHERE ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session') OR ("table_schema" = 'public' AND "table_name" = 'payment')
query: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
query: SELECT columns.*, pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description, ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype", pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type" FROM "information_schema"."columns" LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr" ON "col_attr"."attname" = "columns"."column_name" AND "col_attr"."attrelid" = ( SELECT "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls" LEFT JOIN "pg_catalog"."pg_namespace" AS "ns" ON "ns"."oid" = "cls"."relnamespace" WHERE "cls"."relname" = "columns"."table_name" AND "ns"."nspname" = "columns"."table_schema" ) WHERE ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session') OR ("table_schema" = 'public' AND "table_name" = 'payment')
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name", "am"."amname" AS "index_type" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" INNER JOIN "pg_am" "am" ON "i"."relam" = "am"."oid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'public' AND "cl"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'payment')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='userType'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='role'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='method'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_usertype_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_role_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_method_enum'
query: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'typeorm_metadata'
query: COMMIT
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmCoreModule dependencies initialized[39m[38;5;3m +332ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSubscriptionModule dependencies initialized[39m[38;5;3m +3ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mOrganizationModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSessionModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/api}:[39m[38;5;3m +87ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/health, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/ping, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/test-login, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthController {/api/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/register, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/verify-email, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/login, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/refresh-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/logout, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/change-password, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/forgot-password, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/reset-password, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-service-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/revoke-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/users/:userId, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mMfaController {/api/mfa}:[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/generate, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/enable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/disable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/verify, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserController {/api/users}:[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id/deactivate, PUT} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSessionController {/api/sessions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me/:sessionId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, DELETE} route[39m[38;5;3m +1ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSubscriptionController {/api/subscriptions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/plans, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/status, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/create, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/credits/purchase, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/session/:sessionId/use, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mOrganizationController {/api/organizations}:[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/create, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/subscription, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/users/add, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/users/:userId, DELETE} route[39m[38;5;3m +1ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/my/organization, GET} route[39m[38;5;3m +0ms[39m
Redis connection established
[32m[Nest] 17457  - [39m05/26/2025, 1:26:24 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +18ms[39m
Auth service is running on port 3002 and bound to all interfaces
[2J[3J[H[[90m1:26:49 PM[0m] File change detected. Starting incremental compilation...

[96msrc/session/session.controller.ts[0m:[93m40[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m40[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[96msrc/session/session.controller.ts[0m:[93m78[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m78[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[96msrc/session/session.controller.ts[0m:[93m91[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m91[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[[90m1:26:49 PM[0m] Found 3 errors. Watching for file changes.

[2J[3J[H[[90m1:27:00 PM[0m] File change detected. Starting incremental compilation...

[96msrc/session/session.controller.ts[0m:[93m40[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m40[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[96msrc/session/session.controller.ts[0m:[93m78[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m78[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[96msrc/session/session.controller.ts[0m:[93m91[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m91[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[[90m1:27:00 PM[0m] Found 3 errors. Watching for file changes.

[2J[3J[H[[90m1:27:09 PM[0m] File change detected. Starting incremental compilation...

[96msrc/session/session.controller.ts[0m:[93m40[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m40[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[96msrc/session/session.controller.ts[0m:[93m78[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m78[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[96msrc/session/session.controller.ts[0m:[93m91[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m91[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[[90m1:27:10 PM[0m] Found 3 errors. Watching for file changes.

[2J[3J[H[[90m1:27:16 PM[0m] File change detected. Starting incremental compilation...

[96msrc/session/session.controller.ts[0m:[93m40[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m40[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[96msrc/session/session.controller.ts[0m:[93m78[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m78[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[96msrc/session/session.controller.ts[0m:[93m91[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m91[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[[90m1:27:17 PM[0m] Found 3 errors. Watching for file changes.

[2J[3J[H[[90m1:27:30 PM[0m] File change detected. Starting incremental compilation...

[96msrc/session/session.controller.ts[0m:[93m40[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m40[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[96msrc/session/session.controller.ts[0m:[93m78[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m78[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[96msrc/session/session.controller.ts[0m:[93m91[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m91[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[[90m1:27:30 PM[0m] Found 3 errors. Watching for file changes.

[2J[3J[H[[90m1:27:38 PM[0m] File change detected. Starting incremental compilation...

[96msrc/session/session.controller.ts[0m:[93m41[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m41[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[96msrc/session/session.controller.ts[0m:[93m79[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m79[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[96msrc/session/session.controller.ts[0m:[93m92[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m92[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[[90m1:27:39 PM[0m] Found 3 errors. Watching for file changes.

[2J[3J[H[[90m1:27:56 PM[0m] File change detected. Starting incremental compilation...

[96msrc/session/session.controller.ts[0m:[93m41[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m41[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[96msrc/session/session.controller.ts[0m:[93m79[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m79[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[96msrc/session/session.controller.ts[0m:[93m92[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m92[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[[90m1:27:57 PM[0m] Found 3 errors. Watching for file changes.

query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."id" = $1)) LIMIT 1 -- PARAMETERS: ["9b00ca02-d973-4489-a031-770590b7c6a3"]
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" LIMIT 1
query: SELECT "Organization"."id" AS "Organization_id", "Organization"."name" AS "Organization_name", "Organization"."description" AS "Organization_description", "Organization"."email" AS "Organization_email", "Organization"."phoneNumber" AS "Organization_phoneNumber", "Organization"."address" AS "Organization_address", "Organization"."status" AS "Organization_status", "Organization"."maxUsers" AS "Organization_maxUsers", "Organization"."currentUsers" AS "Organization_currentUsers", "Organization"."pricePerUser" AS "Organization_pricePerUser", "Organization"."sessionsPerUser" AS "Organization_sessionsPerUser", "Organization"."subscriptionStartDate" AS "Organization_subscriptionStartDate", "Organization"."subscriptionEndDate" AS "Organization_subscriptionEndDate", "Organization"."isActive" AS "Organization_isActive", "Organization"."createdAt" AS "Organization_createdAt", "Organization"."updatedAt" AS "Organization_updatedAt" FROM "organization" "Organization" WHERE (((("Organization"."name" = $1))) OR ((("Organization"."email" = $2)))) LIMIT 1 -- PARAMETERS: ["Tech Corp","admin@techcorp.com"]
query: START TRANSACTION
query: INSERT INTO "organization"("id", "name", "description", "email", "phoneNumber", "address", "status", "maxUsers", "currentUsers", "pricePerUser", "sessionsPerUser", "subscriptionStartDate", "subscriptionEndDate", "isActive", "createdAt", "updatedAt") VALUES (DEFAULT, $1, DEFAULT, $2, $3, $4, $5, $6, $7, DEFAULT, DEFAULT, DEFAULT, DEFAULT, $8, DEFAULT, DEFAULT) RETURNING "id", "status", "maxUsers", "currentUsers", "pricePerUser", "sessionsPerUser", "isActive", "createdAt", "updatedAt" -- PARAMETERS: ["Tech Corp","admin@techcorp.com","+256700123456","Kampala, Uganda","active",10,1,0]
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE "User"."id" IN ($1) -- PARAMETERS: ["9b00ca02-d973-4489-a031-770590b7c6a3"]
query: UPDATE "user" SET "role" = $1, "userType" = $2, "organizationId" = $3, "updatedAt" = CURRENT_TIMESTAMP WHERE "id" IN ($4) RETURNING "updatedAt" -- PARAMETERS: ["organization_admin","organization_member","b399131a-c3b5-48e8-abab-7e41f1431b12","9b00ca02-d973-4489-a031-770590b7c6a3"]
query: COMMIT
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."id" = $1)) LIMIT 1 -- PARAMETERS: ["9b00ca02-d973-4489-a031-770590b7c6a3"]
query: SELECT DISTINCT "distinctAlias"."User_id" AS "ids_User_id" FROM (SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt", "User__User_organization"."id" AS "User__User_organization_id", "User__User_organization"."name" AS "User__User_organization_name", "User__User_organization"."description" AS "User__User_organization_description", "User__User_organization"."email" AS "User__User_organization_email", "User__User_organization"."phoneNumber" AS "User__User_organization_phoneNumber", "User__User_organization"."address" AS "User__User_organization_address", "User__User_organization"."status" AS "User__User_organization_status", "User__User_organization"."maxUsers" AS "User__User_organization_maxUsers", "User__User_organization"."currentUsers" AS "User__User_organization_currentUsers", "User__User_organization"."pricePerUser" AS "User__User_organization_pricePerUser", "User__User_organization"."sessionsPerUser" AS "User__User_organization_sessionsPerUser", "User__User_organization"."subscriptionStartDate" AS "User__User_organization_subscriptionStartDate", "User__User_organization"."subscriptionEndDate" AS "User__User_organization_subscriptionEndDate", "User__User_organization"."isActive" AS "User__User_organization_isActive", "User__User_organization"."createdAt" AS "User__User_organization_createdAt", "User__User_organization"."updatedAt" AS "User__User_organization_updatedAt", "User__User_subscriptions"."id" AS "User__User_subscriptions_id", "User__User_subscriptions"."userId" AS "User__User_subscriptions_userId", "User__User_subscriptions"."type" AS "User__User_subscriptions_type", "User__User_subscriptions"."status" AS "User__User_subscriptions_status", "User__User_subscriptions"."amount" AS "User__User_subscriptions_amount", "User__User_subscriptions"."sessionsIncluded" AS "User__User_subscriptions_sessionsIncluded", "User__User_subscriptions"."sessionsUsed" AS "User__User_subscriptions_sessionsUsed", "User__User_subscriptions"."creditsAvailable" AS "User__User_subscriptions_creditsAvailable", "User__User_subscriptions"."startDate" AS "User__User_subscriptions_startDate", "User__User_subscriptions"."endDate" AS "User__User_subscriptions_endDate", "User__User_subscriptions"."lastSessionDate" AS "User__User_subscriptions_lastSessionDate", "User__User_subscriptions"."autoRenew" AS "User__User_subscriptions_autoRenew", "User__User_subscriptions"."paymentReference" AS "User__User_subscriptions_paymentReference", "User__User_subscriptions"."notes" AS "User__User_subscriptions_notes", "User__User_subscriptions"."createdAt" AS "User__User_subscriptions_createdAt", "User__User_subscriptions"."updatedAt" AS "User__User_subscriptions_updatedAt" FROM "user" "User" LEFT JOIN "organization" "User__User_organization" ON "User__User_organization"."id"="User"."organizationId"  LEFT JOIN "subscription" "User__User_subscriptions" ON "User__User_subscriptions"."userId"="User"."id") "distinctAlias" ORDER BY "User_id" ASC LIMIT 1
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt", "User__User_organization"."id" AS "User__User_organization_id", "User__User_organization"."name" AS "User__User_organization_name", "User__User_organization"."description" AS "User__User_organization_description", "User__User_organization"."email" AS "User__User_organization_email", "User__User_organization"."phoneNumber" AS "User__User_organization_phoneNumber", "User__User_organization"."address" AS "User__User_organization_address", "User__User_organization"."status" AS "User__User_organization_status", "User__User_organization"."maxUsers" AS "User__User_organization_maxUsers", "User__User_organization"."currentUsers" AS "User__User_organization_currentUsers", "User__User_organization"."pricePerUser" AS "User__User_organization_pricePerUser", "User__User_organization"."sessionsPerUser" AS "User__User_organization_sessionsPerUser", "User__User_organization"."subscriptionStartDate" AS "User__User_organization_subscriptionStartDate", "User__User_organization"."subscriptionEndDate" AS "User__User_organization_subscriptionEndDate", "User__User_organization"."isActive" AS "User__User_organization_isActive", "User__User_organization"."createdAt" AS "User__User_organization_createdAt", "User__User_organization"."updatedAt" AS "User__User_organization_updatedAt", "User__User_subscriptions"."id" AS "User__User_subscriptions_id", "User__User_subscriptions"."userId" AS "User__User_subscriptions_userId", "User__User_subscriptions"."type" AS "User__User_subscriptions_type", "User__User_subscriptions"."status" AS "User__User_subscriptions_status", "User__User_subscriptions"."amount" AS "User__User_subscriptions_amount", "User__User_subscriptions"."sessionsIncluded" AS "User__User_subscriptions_sessionsIncluded", "User__User_subscriptions"."sessionsUsed" AS "User__User_subscriptions_sessionsUsed", "User__User_subscriptions"."creditsAvailable" AS "User__User_subscriptions_creditsAvailable", "User__User_subscriptions"."startDate" AS "User__User_subscriptions_startDate", "User__User_subscriptions"."endDate" AS "User__User_subscriptions_endDate", "User__User_subscriptions"."lastSessionDate" AS "User__User_subscriptions_lastSessionDate", "User__User_subscriptions"."autoRenew" AS "User__User_subscriptions_autoRenew", "User__User_subscriptions"."paymentReference" AS "User__User_subscriptions_paymentReference", "User__User_subscriptions"."notes" AS "User__User_subscriptions_notes", "User__User_subscriptions"."createdAt" AS "User__User_subscriptions_createdAt", "User__User_subscriptions"."updatedAt" AS "User__User_subscriptions_updatedAt" FROM "user" "User" LEFT JOIN "organization" "User__User_organization" ON "User__User_organization"."id"="User"."organizationId"  LEFT JOIN "subscription" "User__User_subscriptions" ON "User__User_subscriptions"."userId"="User"."id" WHERE "User"."id" IN ($1) -- PARAMETERS: ["9b00ca02-d973-4489-a031-770590b7c6a3"]
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."id" = $1)) LIMIT 1 -- PARAMETERS: ["9b00ca02-d973-4489-a031-770590b7c6a3"]
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" LIMIT 1
query: START TRANSACTION
query: INSERT INTO "subscription"("id", "userId", "type", "status", "amount", "sessionsIncluded", "sessionsUsed", "creditsAvailable", "startDate", "endDate", "lastSessionDate", "autoRenew", "paymentReference", "notes", "createdAt", "updatedAt") VALUES (DEFAULT, DEFAULT, $1, $2, $3, $4, $5, $6, $7, $8, DEFAULT, $9, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING "id", "status", "sessionsIncluded", "sessionsUsed", "creditsAvailable", "autoRenew", "createdAt", "updatedAt" -- PARAMETERS: ["credit","pending",228000,0,0,3,"2025-05-26","2025-08-24",0]
query failed: INSERT INTO "subscription"("id", "userId", "type", "status", "amount", "sessionsIncluded", "sessionsUsed", "creditsAvailable", "startDate", "endDate", "lastSessionDate", "autoRenew", "paymentReference", "notes", "createdAt", "updatedAt") VALUES (DEFAULT, DEFAULT, $1, $2, $3, $4, $5, $6, $7, $8, DEFAULT, $9, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING "id", "status", "sessionsIncluded", "sessionsUsed", "creditsAvailable", "autoRenew", "createdAt", "updatedAt" -- PARAMETERS: ["credit","pending",228000,0,0,3,"2025-05-26","2025-08-24",0]
error: error: null value in column "userId" of relation "subscription" violates not-null constraint
query: ROLLBACK
[31m[Nest] 17457  - [39m05/26/2025, 1:29:48 PM [31m  ERROR[39m [38;5;3m[ExceptionsHandler] [39m[31mnull value in column "userId" of relation "subscription" violates not-null constraint[39m
QueryFailedError: null value in column "userId" of relation "subscription" violates not-null constraint
    at PostgresQueryRunner.query (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/driver/src/driver/postgres/PostgresQueryRunner.ts:331:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async InsertQueryBuilder.execute (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/query-builder/src/query-builder/InsertQueryBuilder.ts:163:33)
    at async SubjectExecutor.executeInsertOperations (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/persistence/src/persistence/SubjectExecutor.ts:435:42)
    at async SubjectExecutor.execute (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/persistence/src/persistence/SubjectExecutor.ts:137:9)
    at async EntityPersistExecutor.execute (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/persistence/src/persistence/EntityPersistExecutor.ts:182:21)
    at async <anonymous> (/Users/mac/Downloads/Mindlyf/backend/auth-service/src/subscription/subscription.service.ts:178:33)
    at async EntityManager.transaction (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/entity-manager/src/entity-manager/EntityManager.ts:154:28)
    at async SubscriptionService.purchaseCredits (/Users/mac/Downloads/Mindlyf/backend/auth-service/src/subscription/subscription.service.ts:163:12)
    at async SubscriptionController.purchaseCredits (/Users/mac/Downloads/Mindlyf/backend/auth-service/src/subscription/subscription.controller.ts:61:12)
[2J[3J[H[[90m1:30:22 PM[0m] File change detected. Starting incremental compilation...

[96msrc/session/session.controller.ts[0m:[93m41[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m41[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[96msrc/session/session.controller.ts[0m:[93m79[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m79[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[96msrc/session/session.controller.ts[0m:[93m92[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m92[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[[90m1:30:22 PM[0m] Found 3 errors. Watching for file changes.

[2J[3J[H[[90m1:30:37 PM[0m] File change detected. Starting incremental compilation...

[96msrc/session/session.controller.ts[0m:[93m41[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m41[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[96msrc/session/session.controller.ts[0m:[93m79[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m79[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[96msrc/session/session.controller.ts[0m:[93m92[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m92[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[[90m1:30:38 PM[0m] Found 3 errors. Watching for file changes.

query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."id" = $1)) LIMIT 1 -- PARAMETERS: ["9b00ca02-d973-4489-a031-770590b7c6a3"]
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" LIMIT 1
query: START TRANSACTION
query: INSERT INTO "subscription"("id", "userId", "type", "status", "amount", "sessionsIncluded", "sessionsUsed", "creditsAvailable", "startDate", "endDate", "lastSessionDate", "autoRenew", "paymentReference", "notes", "createdAt", "updatedAt") VALUES (DEFAULT, DEFAULT, $1, $2, $3, $4, $5, $6, $7, $8, DEFAULT, $9, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING "id", "status", "sessionsIncluded", "sessionsUsed", "creditsAvailable", "autoRenew", "createdAt", "updatedAt" -- PARAMETERS: ["credit","pending",228000,0,0,3,"2025-05-26","2025-08-24",0]
query failed: INSERT INTO "subscription"("id", "userId", "type", "status", "amount", "sessionsIncluded", "sessionsUsed", "creditsAvailable", "startDate", "endDate", "lastSessionDate", "autoRenew", "paymentReference", "notes", "createdAt", "updatedAt") VALUES (DEFAULT, DEFAULT, $1, $2, $3, $4, $5, $6, $7, $8, DEFAULT, $9, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING "id", "status", "sessionsIncluded", "sessionsUsed", "creditsAvailable", "autoRenew", "createdAt", "updatedAt" -- PARAMETERS: ["credit","pending",228000,0,0,3,"2025-05-26","2025-08-24",0]
error: error: null value in column "userId" of relation "subscription" violates not-null constraint
query: ROLLBACK
[31m[Nest] 17457  - [39m05/26/2025, 1:30:59 PM [31m  ERROR[39m [38;5;3m[ExceptionsHandler] [39m[31mnull value in column "userId" of relation "subscription" violates not-null constraint[39m
QueryFailedError: null value in column "userId" of relation "subscription" violates not-null constraint
    at PostgresQueryRunner.query (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/driver/src/driver/postgres/PostgresQueryRunner.ts:331:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async InsertQueryBuilder.execute (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/query-builder/src/query-builder/InsertQueryBuilder.ts:163:33)
    at async SubjectExecutor.executeInsertOperations (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/persistence/src/persistence/SubjectExecutor.ts:435:42)
    at async SubjectExecutor.execute (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/persistence/src/persistence/SubjectExecutor.ts:137:9)
    at async EntityPersistExecutor.execute (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/persistence/src/persistence/EntityPersistExecutor.ts:182:21)
    at async <anonymous> (/Users/mac/Downloads/Mindlyf/backend/auth-service/src/subscription/subscription.service.ts:178:33)
    at async EntityManager.transaction (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/entity-manager/src/entity-manager/EntityManager.ts:154:28)
    at async SubscriptionService.purchaseCredits (/Users/mac/Downloads/Mindlyf/backend/auth-service/src/subscription/subscription.service.ts:163:12)
    at async SubscriptionController.purchaseCredits (/Users/mac/Downloads/Mindlyf/backend/auth-service/src/subscription/subscription.controller.ts:61:12)
[95m[Nest] 17457  - [39m05/26/2025, 1:31:50 PM [95m  DEBUG[39m [38;5;3m[AuthSecurity] [39m[95mPOST /api/auth/register - 127.0.0.1 - curl/8.7.1[39m
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."email" = $1)) LIMIT 1 -- PARAMETERS: ["john@example.com"]
query: START TRANSACTION
query: INSERT INTO "user"("id", "email", "password", "firstName", "lastName", "phoneNumber", "role", "status", "userType", "emailVerified", "verificationToken", "resetPasswordToken", "resetPasswordExpires", "twoFactorEnabled", "twoFactorSecret", "lastLogin", "organizationId", "dateOfBirth", "isMinor", "guardianEmail", "guardianPhone", "createdAt", "updatedAt") VALUES (DEFAULT, $1, $2, $3, $4, DEFAULT, $5, $6, DEFAULT, $7, $8, DEFAULT, DEFAULT, $9, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING "id", "role", "status", "userType", "emailVerified", "twoFactorEnabled", "isMinor", "createdAt", "updatedAt" -- PARAMETERS: ["john@example.com","$2b$10$TyhG1twWgt08/D24Mpf4COOCsnEvu5vkf9bWoILsxJUDfGUm9/o7y","John","Doe","user","pending",0,"d57b7293-a07e-489a-841c-c85d264c513a",0]
query: COMMIT
[95m[Nest] 17457  - [39m05/26/2025, 1:31:50 PM [95m  DEBUG[39m [38;5;3m[EmailService] [39m[95m[DEV MODE] Sending verification email to john@example.com[39m
[95m[Nest] 17457  - [39m05/26/2025, 1:31:50 PM [95m  DEBUG[39m [38;5;3m[EmailService] [39m[95mVerification URL: http://localhost:3000/verify-email?token=d57b7293-a07e-489a-841c-c85d264c513a[39m
[32m[Nest] 17457  - [39m05/26/2025, 1:31:50 PM [32m    LOG[39m [38;5;3m[AuthService] [39m[32mVerification email sent to john@example.com[39m
[95m[Nest] 17457  - [39m05/26/2025, 1:31:50 PM [95m  DEBUG[39m [38;5;3m[EventService] [39m[95m[EVENT EMITTED] user.created[39m
[95m[Nest] 17457  - [39m05/26/2025, 1:31:50 PM [95m  DEBUG[39m [38;5;3m[EventService] [39m[95mObject:[39m
{
  "event": {
    "type": "user.created",
    "payload": {
      "userId": "8d645e93-6222-485e-9539-043fb8c9f100",
      "email": "john@example.com"
    },
    "metadata": {
      "userId": "8d645e93-6222-485e-9539-043fb8c9f100",
      "metadata": {
        "userAgent": "curl/8.7.1"
      },
      "timestamp": "2025-05-26T10:31:50.820Z"
    }
  }
}

[95m[Nest] 17457  - [39m05/26/2025, 1:31:50 PM [95m  DEBUG[39m [38;5;3m[EventService] [39m[95m[EVENT EMITTED] email.verification.sent[39m
[95m[Nest] 17457  - [39m05/26/2025, 1:31:50 PM [95m  DEBUG[39m [38;5;3m[EventService] [39m[95mObject:[39m
{
  "event": {
    "type": "email.verification.sent",
    "payload": {
      "userId": "8d645e93-6222-485e-9539-043fb8c9f100",
      "email": "john@example.com"
    },
    "metadata": {
      "userId": "8d645e93-6222-485e-9539-043fb8c9f100",
      "metadata": {
        "userAgent": "curl/8.7.1"
      },
      "timestamp": "2025-05-26T10:31:50.820Z"
    }
  }
}

[31m[Nest] 17457  - [39m05/26/2025, 1:31:55 PM [31m  ERROR[39m [38;5;3m[AuthService] [39m[31mFailed to send welcome notification: getaddrinfo ENOTFOUND notification-service[39m
Error: getaddrinfo ENOTFOUND notification-service
    at Function.AxiosError.from (/Users/mac/Downloads/Mindlyf/backend/node_modules/axios/lib/core/AxiosError.js:92:14)
    at RedirectableRequest.handleRequestError (/Users/mac/Downloads/Mindlyf/backend/node_modules/axios/lib/adapters/http.js:620:25)
    at RedirectableRequest.emit (node:events:519:28)
    at eventHandlers.<computed> (/Users/mac/Downloads/Mindlyf/backend/node_modules/follow-redirects/index.js:49:24)
    at ClientRequest.emit (node:events:519:28)
    at emitErrorEvent (node:_http_client:108:11)
    at Socket.socketErrorListener (node:_http_client:511:5)
    at Socket.emit (node:events:519:28)
    at emitErrorNT (node:internal/streams/destroy:169:8)
    at emitErrorCloseNT (node:internal/streams/destroy:128:3)
    at Axios.request (/Users/mac/Downloads/Mindlyf/backend/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
[95m[Nest] 17457  - [39m05/26/2025, 1:31:55 PM [95m  DEBUG[39m [38;5;3m[AuthSecurity] [39m[95mPOST /api/auth/register 201 - 127.0.0.1 - curl/8.7.1 - 134[39m
[95m[Nest] 17457  - [39m05/26/2025, 1:32:15 PM [95m  DEBUG[39m [38;5;3m[AuthSecurity] [39m[95mPOST /api/auth/login - 127.0.0.1 - curl/8.7.1[39m
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."email" = $1)) LIMIT 1 -- PARAMETERS: ["john@example.com"]
query: SELECT "UserSession"."id" AS "UserSession_id", "UserSession"."userId" AS "UserSession_userId", "UserSession"."refreshToken" AS "UserSession_refreshToken", "UserSession"."ipAddress" AS "UserSession_ipAddress", "UserSession"."userAgent" AS "UserSession_userAgent", "UserSession"."deviceInfo" AS "UserSession_deviceInfo", "UserSession"."lastUsedAt" AS "UserSession_lastUsedAt", "UserSession"."isRevoked" AS "UserSession_isRevoked", "UserSession"."revokedAt" AS "UserSession_revokedAt", "UserSession"."revokedReason" AS "UserSession_revokedReason", "UserSession"."status" AS "UserSession_status", "UserSession"."endedAt" AS "UserSession_endedAt", "UserSession"."createdAt" AS "UserSession_createdAt", "UserSession"."updatedAt" AS "UserSession_updatedAt", "UserSession"."expiresAt" AS "UserSession_expiresAt" FROM "user_session" "UserSession" WHERE (("UserSession"."id" = $1)) LIMIT 1 -- PARAMETERS: ["8a10233a-b88b-4ea2-960d-e85dcbc1a83d"]
query: SELECT "UserSession"."id" AS "UserSession_id", "UserSession"."userId" AS "UserSession_userId", "UserSession"."refreshToken" AS "UserSession_refreshToken", "UserSession"."ipAddress" AS "UserSession_ipAddress", "UserSession"."userAgent" AS "UserSession_userAgent", "UserSession"."deviceInfo" AS "UserSession_deviceInfo", "UserSession"."lastUsedAt" AS "UserSession_lastUsedAt", "UserSession"."isRevoked" AS "UserSession_isRevoked", "UserSession"."revokedAt" AS "UserSession_revokedAt", "UserSession"."revokedReason" AS "UserSession_revokedReason", "UserSession"."status" AS "UserSession_status", "UserSession"."endedAt" AS "UserSession_endedAt", "UserSession"."createdAt" AS "UserSession_createdAt", "UserSession"."updatedAt" AS "UserSession_updatedAt", "UserSession"."expiresAt" AS "UserSession_expiresAt" FROM "user_session" "UserSession" WHERE "UserSession"."id" IN ($1) -- PARAMETERS: ["8a10233a-b88b-4ea2-960d-e85dcbc1a83d"]
query: START TRANSACTION
query: INSERT INTO "user_session"("id", "userId", "refreshToken", "ipAddress", "userAgent", "deviceInfo", "lastUsedAt", "isRevoked", "revokedAt", "revokedReason", "status", "endedAt", "createdAt", "updatedAt", "expiresAt") VALUES ($1, $2, $3, DEFAULT, $4, $5, $6, $7, DEFAULT, DEFAULT, DEFAULT, DEFAULT, $8, $9, $10) RETURNING "id", "isRevoked", "status", "createdAt", "updatedAt" -- PARAMETERS: ["8a10233a-b88b-4ea2-960d-e85dcbc1a83d","8d645e93-6222-485e-9539-043fb8c9f100","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI4ZDY0NWU5My02MjIyLTQ4NWUtOTUzOS0wNDNmYjhjOWYxMDAiLCJlbWFpbCI6ImpvaG5AZXhhbXBsZS5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc0ODI1NTUzNSwiZXhwIjoxNzQ4ODYwMzM1fQ.WbPk_cEX3nvK5GFCLQ-ROwPp0eA5Ti69WAxDbSJCbIg","curl/8.7.1","curl/8.7.1","2025-05-26T10:32:15.529Z",0,"2025-05-26T10:32:15.529Z","2025-05-26T10:32:15.529Z","2025-06-02T10:32:15.529Z"]
query: COMMIT
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."id" = $1)) LIMIT 1 -- PARAMETERS: ["8d645e93-6222-485e-9539-043fb8c9f100"]
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE "User"."id" IN ($1) -- PARAMETERS: ["8d645e93-6222-485e-9539-043fb8c9f100"]
query: START TRANSACTION
query: UPDATE "user" SET "lastLogin" = $1, "updatedAt" = CURRENT_TIMESTAMP WHERE "id" IN ($2) RETURNING "updatedAt" -- PARAMETERS: ["2025-05-26T10:32:15.546Z","8d645e93-6222-485e-9539-043fb8c9f100"]
query: COMMIT
[95m[Nest] 17457  - [39m05/26/2025, 1:32:15 PM [95m  DEBUG[39m [38;5;3m[EventService] [39m[95m[EVENT EMITTED] auth.login.success[39m
[95m[Nest] 17457  - [39m05/26/2025, 1:32:15 PM [95m  DEBUG[39m [38;5;3m[EventService] [39m[95mObject:[39m
{
  "event": {
    "type": "auth.login.success",
    "payload": {
      "userId": "8d645e93-6222-485e-9539-043fb8c9f100",
      "sessionId": "8a10233a-b88b-4ea2-960d-e85dcbc1a83d"
    },
    "metadata": {
      "userId": "8d645e93-6222-485e-9539-043fb8c9f100",
      "metadata": {
        "userAgent": "curl/8.7.1",
        "deviceInfo": "curl/8.7.1"
      },
      "timestamp": "2025-05-26T10:32:15.590Z"
    }
  }
}

[95m[Nest] 17457  - [39m05/26/2025, 1:32:15 PM [95m  DEBUG[39m [38;5;3m[AuthSecurity] [39m[95mPOST /api/auth/login 200 - 127.0.0.1 - curl/8.7.1 - 698[39m
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."id" = $1)) LIMIT 1 -- PARAMETERS: ["8d645e93-6222-485e-9539-043fb8c9f100"]
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" LIMIT 1
query: START TRANSACTION
query: INSERT INTO "subscription"("id", "userId", "type", "status", "amount", "sessionsIncluded", "sessionsUsed", "creditsAvailable", "startDate", "endDate", "lastSessionDate", "autoRenew", "paymentReference", "notes", "createdAt", "updatedAt") VALUES (DEFAULT, DEFAULT, $1, $2, $3, $4, $5, $6, $7, $8, DEFAULT, $9, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING "id", "status", "sessionsIncluded", "sessionsUsed", "creditsAvailable", "autoRenew", "createdAt", "updatedAt" -- PARAMETERS: ["credit","pending",228000,0,0,3,"2025-05-26","2025-08-24",0]
query failed: INSERT INTO "subscription"("id", "userId", "type", "status", "amount", "sessionsIncluded", "sessionsUsed", "creditsAvailable", "startDate", "endDate", "lastSessionDate", "autoRenew", "paymentReference", "notes", "createdAt", "updatedAt") VALUES (DEFAULT, DEFAULT, $1, $2, $3, $4, $5, $6, $7, $8, DEFAULT, $9, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING "id", "status", "sessionsIncluded", "sessionsUsed", "creditsAvailable", "autoRenew", "createdAt", "updatedAt" -- PARAMETERS: ["credit","pending",228000,0,0,3,"2025-05-26","2025-08-24",0]
error: error: null value in column "userId" of relation "subscription" violates not-null constraint
query: ROLLBACK
[31m[Nest] 17457  - [39m05/26/2025, 1:32:39 PM [31m  ERROR[39m [38;5;3m[ExceptionsHandler] [39m[31mnull value in column "userId" of relation "subscription" violates not-null constraint[39m
QueryFailedError: null value in column "userId" of relation "subscription" violates not-null constraint
    at PostgresQueryRunner.query (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/driver/src/driver/postgres/PostgresQueryRunner.ts:331:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async InsertQueryBuilder.execute (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/query-builder/src/query-builder/InsertQueryBuilder.ts:163:33)
    at async SubjectExecutor.executeInsertOperations (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/persistence/src/persistence/SubjectExecutor.ts:435:42)
    at async SubjectExecutor.execute (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/persistence/src/persistence/SubjectExecutor.ts:137:9)
    at async EntityPersistExecutor.execute (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/persistence/src/persistence/EntityPersistExecutor.ts:182:21)
    at async <anonymous> (/Users/mac/Downloads/Mindlyf/backend/auth-service/src/subscription/subscription.service.ts:178:33)
    at async EntityManager.transaction (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/entity-manager/src/entity-manager/EntityManager.ts:154:28)
    at async SubscriptionService.purchaseCredits (/Users/mac/Downloads/Mindlyf/backend/auth-service/src/subscription/subscription.service.ts:163:12)
    at async SubscriptionController.purchaseCredits (/Users/mac/Downloads/Mindlyf/backend/auth-service/src/subscription/subscription.controller.ts:61:12)
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."id" = $1)) LIMIT 1 -- PARAMETERS: ["8d645e93-6222-485e-9539-043fb8c9f100"]
query: SELECT DISTINCT "distinctAlias"."User_id" AS "ids_User_id" FROM (SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt", "User__User_organization"."id" AS "User__User_organization_id", "User__User_organization"."name" AS "User__User_organization_name", "User__User_organization"."description" AS "User__User_organization_description", "User__User_organization"."email" AS "User__User_organization_email", "User__User_organization"."phoneNumber" AS "User__User_organization_phoneNumber", "User__User_organization"."address" AS "User__User_organization_address", "User__User_organization"."status" AS "User__User_organization_status", "User__User_organization"."maxUsers" AS "User__User_organization_maxUsers", "User__User_organization"."currentUsers" AS "User__User_organization_currentUsers", "User__User_organization"."pricePerUser" AS "User__User_organization_pricePerUser", "User__User_organization"."sessionsPerUser" AS "User__User_organization_sessionsPerUser", "User__User_organization"."subscriptionStartDate" AS "User__User_organization_subscriptionStartDate", "User__User_organization"."subscriptionEndDate" AS "User__User_organization_subscriptionEndDate", "User__User_organization"."isActive" AS "User__User_organization_isActive", "User__User_organization"."createdAt" AS "User__User_organization_createdAt", "User__User_organization"."updatedAt" AS "User__User_organization_updatedAt", "User__User_subscriptions"."id" AS "User__User_subscriptions_id", "User__User_subscriptions"."userId" AS "User__User_subscriptions_userId", "User__User_subscriptions"."type" AS "User__User_subscriptions_type", "User__User_subscriptions"."status" AS "User__User_subscriptions_status", "User__User_subscriptions"."amount" AS "User__User_subscriptions_amount", "User__User_subscriptions"."sessionsIncluded" AS "User__User_subscriptions_sessionsIncluded", "User__User_subscriptions"."sessionsUsed" AS "User__User_subscriptions_sessionsUsed", "User__User_subscriptions"."creditsAvailable" AS "User__User_subscriptions_creditsAvailable", "User__User_subscriptions"."startDate" AS "User__User_subscriptions_startDate", "User__User_subscriptions"."endDate" AS "User__User_subscriptions_endDate", "User__User_subscriptions"."lastSessionDate" AS "User__User_subscriptions_lastSessionDate", "User__User_subscriptions"."autoRenew" AS "User__User_subscriptions_autoRenew", "User__User_subscriptions"."paymentReference" AS "User__User_subscriptions_paymentReference", "User__User_subscriptions"."notes" AS "User__User_subscriptions_notes", "User__User_subscriptions"."createdAt" AS "User__User_subscriptions_createdAt", "User__User_subscriptions"."updatedAt" AS "User__User_subscriptions_updatedAt" FROM "user" "User" LEFT JOIN "organization" "User__User_organization" ON "User__User_organization"."id"="User"."organizationId"  LEFT JOIN "subscription" "User__User_subscriptions" ON "User__User_subscriptions"."userId"="User"."id") "distinctAlias" ORDER BY "User_id" ASC LIMIT 1
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt", "User__User_organization"."id" AS "User__User_organization_id", "User__User_organization"."name" AS "User__User_organization_name", "User__User_organization"."description" AS "User__User_organization_description", "User__User_organization"."email" AS "User__User_organization_email", "User__User_organization"."phoneNumber" AS "User__User_organization_phoneNumber", "User__User_organization"."address" AS "User__User_organization_address", "User__User_organization"."status" AS "User__User_organization_status", "User__User_organization"."maxUsers" AS "User__User_organization_maxUsers", "User__User_organization"."currentUsers" AS "User__User_organization_currentUsers", "User__User_organization"."pricePerUser" AS "User__User_organization_pricePerUser", "User__User_organization"."sessionsPerUser" AS "User__User_organization_sessionsPerUser", "User__User_organization"."subscriptionStartDate" AS "User__User_organization_subscriptionStartDate", "User__User_organization"."subscriptionEndDate" AS "User__User_organization_subscriptionEndDate", "User__User_organization"."isActive" AS "User__User_organization_isActive", "User__User_organization"."createdAt" AS "User__User_organization_createdAt", "User__User_organization"."updatedAt" AS "User__User_organization_updatedAt", "User__User_subscriptions"."id" AS "User__User_subscriptions_id", "User__User_subscriptions"."userId" AS "User__User_subscriptions_userId", "User__User_subscriptions"."type" AS "User__User_subscriptions_type", "User__User_subscriptions"."status" AS "User__User_subscriptions_status", "User__User_subscriptions"."amount" AS "User__User_subscriptions_amount", "User__User_subscriptions"."sessionsIncluded" AS "User__User_subscriptions_sessionsIncluded", "User__User_subscriptions"."sessionsUsed" AS "User__User_subscriptions_sessionsUsed", "User__User_subscriptions"."creditsAvailable" AS "User__User_subscriptions_creditsAvailable", "User__User_subscriptions"."startDate" AS "User__User_subscriptions_startDate", "User__User_subscriptions"."endDate" AS "User__User_subscriptions_endDate", "User__User_subscriptions"."lastSessionDate" AS "User__User_subscriptions_lastSessionDate", "User__User_subscriptions"."autoRenew" AS "User__User_subscriptions_autoRenew", "User__User_subscriptions"."paymentReference" AS "User__User_subscriptions_paymentReference", "User__User_subscriptions"."notes" AS "User__User_subscriptions_notes", "User__User_subscriptions"."createdAt" AS "User__User_subscriptions_createdAt", "User__User_subscriptions"."updatedAt" AS "User__User_subscriptions_updatedAt" FROM "user" "User" LEFT JOIN "organization" "User__User_organization" ON "User__User_organization"."id"="User"."organizationId"  LEFT JOIN "subscription" "User__User_subscriptions" ON "User__User_subscriptions"."userId"="User"."id" WHERE "User"."id" IN ($1) -- PARAMETERS: ["8d645e93-6222-485e-9539-043fb8c9f100"]
query: START TRANSACTION
query: INSERT INTO "subscription"("id", "userId", "type", "status", "amount", "sessionsIncluded", "sessionsUsed", "creditsAvailable", "startDate", "endDate", "lastSessionDate", "autoRenew", "paymentReference", "notes", "createdAt", "updatedAt") VALUES (DEFAULT, DEFAULT, $1, $2, $3, $4, $5, $6, $7, $8, DEFAULT, $9, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING "id", "status", "sessionsIncluded", "sessionsUsed", "creditsAvailable", "autoRenew", "createdAt", "updatedAt" -- PARAMETERS: ["monthly","pending",200000,4,0,0,"2025-05-26","2025-06-25",1]
query failed: INSERT INTO "subscription"("id", "userId", "type", "status", "amount", "sessionsIncluded", "sessionsUsed", "creditsAvailable", "startDate", "endDate", "lastSessionDate", "autoRenew", "paymentReference", "notes", "createdAt", "updatedAt") VALUES (DEFAULT, DEFAULT, $1, $2, $3, $4, $5, $6, $7, $8, DEFAULT, $9, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING "id", "status", "sessionsIncluded", "sessionsUsed", "creditsAvailable", "autoRenew", "createdAt", "updatedAt" -- PARAMETERS: ["monthly","pending",200000,4,0,0,"2025-05-26","2025-06-25",1]
error: error: null value in column "userId" of relation "subscription" violates not-null constraint
query: ROLLBACK
[31m[Nest] 17457  - [39m05/26/2025, 1:32:45 PM [31m  ERROR[39m [38;5;3m[ExceptionsHandler] [39m[31mnull value in column "userId" of relation "subscription" violates not-null constraint[39m
QueryFailedError: null value in column "userId" of relation "subscription" violates not-null constraint
    at PostgresQueryRunner.query (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/driver/src/driver/postgres/PostgresQueryRunner.ts:331:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async InsertQueryBuilder.execute (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/query-builder/src/query-builder/InsertQueryBuilder.ts:163:33)
    at async SubjectExecutor.executeInsertOperations (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/persistence/src/persistence/SubjectExecutor.ts:435:42)
    at async SubjectExecutor.execute (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/persistence/src/persistence/SubjectExecutor.ts:137:9)
    at async EntityPersistExecutor.execute (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/persistence/src/persistence/EntityPersistExecutor.ts:182:21)
    at async <anonymous> (/Users/mac/Downloads/Mindlyf/backend/auth-service/src/subscription/subscription.service.ts:128:33)
    at async EntityManager.transaction (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/entity-manager/src/entity-manager/EntityManager.ts:154:28)
    at async SubscriptionService.createSubscription (/Users/mac/Downloads/Mindlyf/backend/auth-service/src/subscription/subscription.service.ts:113:12)
    at async SubscriptionController.createSubscription (/Users/mac/Downloads/Mindlyf/backend/auth-service/src/subscription/subscription.controller.ts:41:12)
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."id" = $1)) LIMIT 1 -- PARAMETERS: ["8d645e93-6222-485e-9539-043fb8c9f100"]
query: SELECT DISTINCT "distinctAlias"."User_id" AS "ids_User_id" FROM (SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt", "User__User_subscriptions"."id" AS "User__User_subscriptions_id", "User__User_subscriptions"."userId" AS "User__User_subscriptions_userId", "User__User_subscriptions"."type" AS "User__User_subscriptions_type", "User__User_subscriptions"."status" AS "User__User_subscriptions_status", "User__User_subscriptions"."amount" AS "User__User_subscriptions_amount", "User__User_subscriptions"."sessionsIncluded" AS "User__User_subscriptions_sessionsIncluded", "User__User_subscriptions"."sessionsUsed" AS "User__User_subscriptions_sessionsUsed", "User__User_subscriptions"."creditsAvailable" AS "User__User_subscriptions_creditsAvailable", "User__User_subscriptions"."startDate" AS "User__User_subscriptions_startDate", "User__User_subscriptions"."endDate" AS "User__User_subscriptions_endDate", "User__User_subscriptions"."lastSessionDate" AS "User__User_subscriptions_lastSessionDate", "User__User_subscriptions"."autoRenew" AS "User__User_subscriptions_autoRenew", "User__User_subscriptions"."paymentReference" AS "User__User_subscriptions_paymentReference", "User__User_subscriptions"."notes" AS "User__User_subscriptions_notes", "User__User_subscriptions"."createdAt" AS "User__User_subscriptions_createdAt", "User__User_subscriptions"."updatedAt" AS "User__User_subscriptions_updatedAt", "User__User_organization"."id" AS "User__User_organization_id", "User__User_organization"."name" AS "User__User_organization_name", "User__User_organization"."description" AS "User__User_organization_description", "User__User_organization"."email" AS "User__User_organization_email", "User__User_organization"."phoneNumber" AS "User__User_organization_phoneNumber", "User__User_organization"."address" AS "User__User_organization_address", "User__User_organization"."status" AS "User__User_organization_status", "User__User_organization"."maxUsers" AS "User__User_organization_maxUsers", "User__User_organization"."currentUsers" AS "User__User_organization_currentUsers", "User__User_organization"."pricePerUser" AS "User__User_organization_pricePerUser", "User__User_organization"."sessionsPerUser" AS "User__User_organization_sessionsPerUser", "User__User_organization"."subscriptionStartDate" AS "User__User_organization_subscriptionStartDate", "User__User_organization"."subscriptionEndDate" AS "User__User_organization_subscriptionEndDate", "User__User_organization"."isActive" AS "User__User_organization_isActive", "User__User_organization"."createdAt" AS "User__User_organization_createdAt", "User__User_organization"."updatedAt" AS "User__User_organization_updatedAt" FROM "user" "User" LEFT JOIN "subscription" "User__User_subscriptions" ON "User__User_subscriptions"."userId"="User"."id"  LEFT JOIN "organization" "User__User_organization" ON "User__User_organization"."id"="User"."organizationId") "distinctAlias" ORDER BY "User_id" ASC LIMIT 1
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt", "User__User_subscriptions"."id" AS "User__User_subscriptions_id", "User__User_subscriptions"."userId" AS "User__User_subscriptions_userId", "User__User_subscriptions"."type" AS "User__User_subscriptions_type", "User__User_subscriptions"."status" AS "User__User_subscriptions_status", "User__User_subscriptions"."amount" AS "User__User_subscriptions_amount", "User__User_subscriptions"."sessionsIncluded" AS "User__User_subscriptions_sessionsIncluded", "User__User_subscriptions"."sessionsUsed" AS "User__User_subscriptions_sessionsUsed", "User__User_subscriptions"."creditsAvailable" AS "User__User_subscriptions_creditsAvailable", "User__User_subscriptions"."startDate" AS "User__User_subscriptions_startDate", "User__User_subscriptions"."endDate" AS "User__User_subscriptions_endDate", "User__User_subscriptions"."lastSessionDate" AS "User__User_subscriptions_lastSessionDate", "User__User_subscriptions"."autoRenew" AS "User__User_subscriptions_autoRenew", "User__User_subscriptions"."paymentReference" AS "User__User_subscriptions_paymentReference", "User__User_subscriptions"."notes" AS "User__User_subscriptions_notes", "User__User_subscriptions"."createdAt" AS "User__User_subscriptions_createdAt", "User__User_subscriptions"."updatedAt" AS "User__User_subscriptions_updatedAt", "User__User_organization"."id" AS "User__User_organization_id", "User__User_organization"."name" AS "User__User_organization_name", "User__User_organization"."description" AS "User__User_organization_description", "User__User_organization"."email" AS "User__User_organization_email", "User__User_organization"."phoneNumber" AS "User__User_organization_phoneNumber", "User__User_organization"."address" AS "User__User_organization_address", "User__User_organization"."status" AS "User__User_organization_status", "User__User_organization"."maxUsers" AS "User__User_organization_maxUsers", "User__User_organization"."currentUsers" AS "User__User_organization_currentUsers", "User__User_organization"."pricePerUser" AS "User__User_organization_pricePerUser", "User__User_organization"."sessionsPerUser" AS "User__User_organization_sessionsPerUser", "User__User_organization"."subscriptionStartDate" AS "User__User_organization_subscriptionStartDate", "User__User_organization"."subscriptionEndDate" AS "User__User_organization_subscriptionEndDate", "User__User_organization"."isActive" AS "User__User_organization_isActive", "User__User_organization"."createdAt" AS "User__User_organization_createdAt", "User__User_organization"."updatedAt" AS "User__User_organization_updatedAt" FROM "user" "User" LEFT JOIN "subscription" "User__User_subscriptions" ON "User__User_subscriptions"."userId"="User"."id"  LEFT JOIN "organization" "User__User_organization" ON "User__User_organization"."id"="User"."organizationId" WHERE "User"."id" IN ($1) -- PARAMETERS: ["8d645e93-6222-485e-9539-043fb8c9f100"]
query: SELECT "TherapySession"."id" AS "TherapySession_id", "TherapySession"."userId" AS "TherapySession_userId", "TherapySession"."therapistId" AS "TherapySession_therapistId", "TherapySession"."subscriptionId" AS "TherapySession_subscriptionId", "TherapySession"."status" AS "TherapySession_status", "TherapySession"."type" AS "TherapySession_type", "TherapySession"."scheduledAt" AS "TherapySession_scheduledAt", "TherapySession"."startedAt" AS "TherapySession_startedAt", "TherapySession"."endedAt" AS "TherapySession_endedAt", "TherapySession"."durationMinutes" AS "TherapySession_durationMinutes", "TherapySession"."cost" AS "TherapySession_cost", "TherapySession"."paidFromCredit" AS "TherapySession_paidFromCredit", "TherapySession"."paidFromSubscription" AS "TherapySession_paidFromSubscription", "TherapySession"."paymentReference" AS "TherapySession_paymentReference", "TherapySession"."notes" AS "TherapySession_notes", "TherapySession"."cancellationReason" AS "TherapySession_cancellationReason", "TherapySession"."meetingLink" AS "TherapySession_meetingLink", "TherapySession"."meetingId" AS "TherapySession_meetingId", "TherapySession"."createdAt" AS "TherapySession_createdAt", "TherapySession"."updatedAt" AS "TherapySession_updatedAt" FROM "therapy_session" "TherapySession" WHERE (("TherapySession"."status" = $1)) ORDER BY "TherapySession"."scheduledAt" DESC LIMIT 1 -- PARAMETERS: ["completed"]
[2J[3J[H[[90m1:33:24 PM[0m] File change detected. Starting incremental compilation...

[96msrc/session/session.controller.ts[0m:[93m41[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m41[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[96msrc/session/session.controller.ts[0m:[93m79[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m79[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[96msrc/session/session.controller.ts[0m:[93m92[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m92[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[[90m1:33:25 PM[0m] Found 3 errors. Watching for file changes.

[2J[3J[H[[90m1:33:43 PM[0m] File change detected. Starting incremental compilation...

[96msrc/session/session.controller.ts[0m:[93m41[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m41[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[96msrc/session/session.controller.ts[0m:[93m79[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m79[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[96msrc/session/session.controller.ts[0m:[93m92[0m:[93m10[0m - [91merror[0m[90m TS2345: [0mArgument of type '"therapist"' is not assignable to parameter of type 'UserRole'.

[7m92[0m   @Roles('therapist')
[7m  [0m [91m         ~~~~~~~~~~~[0m

[[90m1:33:43 PM[0m] Found 3 errors. Watching for file changes.

query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."id" = $1)) LIMIT 1 -- PARAMETERS: ["8d645e93-6222-485e-9539-043fb8c9f100"]
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" LIMIT 1
query: START TRANSACTION
query: INSERT INTO "subscription"("id", "userId", "type", "status", "amount", "sessionsIncluded", "sessionsUsed", "creditsAvailable", "startDate", "endDate", "lastSessionDate", "autoRenew", "paymentReference", "notes", "createdAt", "updatedAt") VALUES (DEFAULT, DEFAULT, $1, $2, $3, $4, $5, $6, $7, $8, DEFAULT, $9, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING "id", "status", "sessionsIncluded", "sessionsUsed", "creditsAvailable", "autoRenew", "createdAt", "updatedAt" -- PARAMETERS: ["credit","pending",228000,0,0,3,"2025-05-26","2025-08-24",0]
query failed: INSERT INTO "subscription"("id", "userId", "type", "status", "amount", "sessionsIncluded", "sessionsUsed", "creditsAvailable", "startDate", "endDate", "lastSessionDate", "autoRenew", "paymentReference", "notes", "createdAt", "updatedAt") VALUES (DEFAULT, DEFAULT, $1, $2, $3, $4, $5, $6, $7, $8, DEFAULT, $9, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING "id", "status", "sessionsIncluded", "sessionsUsed", "creditsAvailable", "autoRenew", "createdAt", "updatedAt" -- PARAMETERS: ["credit","pending",228000,0,0,3,"2025-05-26","2025-08-24",0]
error: error: null value in column "userId" of relation "subscription" violates not-null constraint
query: ROLLBACK
[31m[Nest] 17457  - [39m05/26/2025, 1:34:08 PM [31m  ERROR[39m [38;5;3m[ExceptionsHandler] [39m[31mnull value in column "userId" of relation "subscription" violates not-null constraint[39m
QueryFailedError: null value in column "userId" of relation "subscription" violates not-null constraint
    at PostgresQueryRunner.query (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/driver/src/driver/postgres/PostgresQueryRunner.ts:331:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async InsertQueryBuilder.execute (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/query-builder/src/query-builder/InsertQueryBuilder.ts:163:33)
    at async SubjectExecutor.executeInsertOperations (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/persistence/src/persistence/SubjectExecutor.ts:435:42)
    at async SubjectExecutor.execute (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/persistence/src/persistence/SubjectExecutor.ts:137:9)
    at async EntityPersistExecutor.execute (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/persistence/src/persistence/EntityPersistExecutor.ts:182:21)
    at async <anonymous> (/Users/mac/Downloads/Mindlyf/backend/auth-service/src/subscription/subscription.service.ts:178:33)
    at async EntityManager.transaction (/Users/mac/Downloads/Mindlyf/backend/auth-service/node_modules/typeorm/entity-manager/src/entity-manager/EntityManager.ts:154:28)
    at async SubscriptionService.purchaseCredits (/Users/mac/Downloads/Mindlyf/backend/auth-service/src/subscription/subscription.service.ts:163:12)
    at async SubscriptionController.purchaseCredits (/Users/mac/Downloads/Mindlyf/backend/auth-service/src/subscription/subscription.controller.ts:61:12)
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."id" = $1)) LIMIT 1 -- PARAMETERS: ["8d645e93-6222-485e-9539-043fb8c9f100"]
query: SELECT DISTINCT "distinctAlias"."User_id" AS "ids_User_id" FROM (SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt", "User__User_subscriptions"."id" AS "User__User_subscriptions_id", "User__User_subscriptions"."userId" AS "User__User_subscriptions_userId", "User__User_subscriptions"."type" AS "User__User_subscriptions_type", "User__User_subscriptions"."status" AS "User__User_subscriptions_status", "User__User_subscriptions"."amount" AS "User__User_subscriptions_amount", "User__User_subscriptions"."sessionsIncluded" AS "User__User_subscriptions_sessionsIncluded", "User__User_subscriptions"."sessionsUsed" AS "User__User_subscriptions_sessionsUsed", "User__User_subscriptions"."creditsAvailable" AS "User__User_subscriptions_creditsAvailable", "User__User_subscriptions"."startDate" AS "User__User_subscriptions_startDate", "User__User_subscriptions"."endDate" AS "User__User_subscriptions_endDate", "User__User_subscriptions"."lastSessionDate" AS "User__User_subscriptions_lastSessionDate", "User__User_subscriptions"."autoRenew" AS "User__User_subscriptions_autoRenew", "User__User_subscriptions"."paymentReference" AS "User__User_subscriptions_paymentReference", "User__User_subscriptions"."notes" AS "User__User_subscriptions_notes", "User__User_subscriptions"."createdAt" AS "User__User_subscriptions_createdAt", "User__User_subscriptions"."updatedAt" AS "User__User_subscriptions_updatedAt", "User__User_organization"."id" AS "User__User_organization_id", "User__User_organization"."name" AS "User__User_organization_name", "User__User_organization"."description" AS "User__User_organization_description", "User__User_organization"."email" AS "User__User_organization_email", "User__User_organization"."phoneNumber" AS "User__User_organization_phoneNumber", "User__User_organization"."address" AS "User__User_organization_address", "User__User_organization"."status" AS "User__User_organization_status", "User__User_organization"."maxUsers" AS "User__User_organization_maxUsers", "User__User_organization"."currentUsers" AS "User__User_organization_currentUsers", "User__User_organization"."pricePerUser" AS "User__User_organization_pricePerUser", "User__User_organization"."sessionsPerUser" AS "User__User_organization_sessionsPerUser", "User__User_organization"."subscriptionStartDate" AS "User__User_organization_subscriptionStartDate", "User__User_organization"."subscriptionEndDate" AS "User__User_organization_subscriptionEndDate", "User__User_organization"."isActive" AS "User__User_organization_isActive", "User__User_organization"."createdAt" AS "User__User_organization_createdAt", "User__User_organization"."updatedAt" AS "User__User_organization_updatedAt" FROM "user" "User" LEFT JOIN "subscription" "User__User_subscriptions" ON "User__User_subscriptions"."userId"="User"."id"  LEFT JOIN "organization" "User__User_organization" ON "User__User_organization"."id"="User"."organizationId") "distinctAlias" ORDER BY "User_id" ASC LIMIT 1
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt", "User__User_subscriptions"."id" AS "User__User_subscriptions_id", "User__User_subscriptions"."userId" AS "User__User_subscriptions_userId", "User__User_subscriptions"."type" AS "User__User_subscriptions_type", "User__User_subscriptions"."status" AS "User__User_subscriptions_status", "User__User_subscriptions"."amount" AS "User__User_subscriptions_amount", "User__User_subscriptions"."sessionsIncluded" AS "User__User_subscriptions_sessionsIncluded", "User__User_subscriptions"."sessionsUsed" AS "User__User_subscriptions_sessionsUsed", "User__User_subscriptions"."creditsAvailable" AS "User__User_subscriptions_creditsAvailable", "User__User_subscriptions"."startDate" AS "User__User_subscriptions_startDate", "User__User_subscriptions"."endDate" AS "User__User_subscriptions_endDate", "User__User_subscriptions"."lastSessionDate" AS "User__User_subscriptions_lastSessionDate", "User__User_subscriptions"."autoRenew" AS "User__User_subscriptions_autoRenew", "User__User_subscriptions"."paymentReference" AS "User__User_subscriptions_paymentReference", "User__User_subscriptions"."notes" AS "User__User_subscriptions_notes", "User__User_subscriptions"."createdAt" AS "User__User_subscriptions_createdAt", "User__User_subscriptions"."updatedAt" AS "User__User_subscriptions_updatedAt", "User__User_organization"."id" AS "User__User_organization_id", "User__User_organization"."name" AS "User__User_organization_name", "User__User_organization"."description" AS "User__User_organization_description", "User__User_organization"."email" AS "User__User_organization_email", "User__User_organization"."phoneNumber" AS "User__User_organization_phoneNumber", "User__User_organization"."address" AS "User__User_organization_address", "User__User_organization"."status" AS "User__User_organization_status", "User__User_organization"."maxUsers" AS "User__User_organization_maxUsers", "User__User_organization"."currentUsers" AS "User__User_organization_currentUsers", "User__User_organization"."pricePerUser" AS "User__User_organization_pricePerUser", "User__User_organization"."sessionsPerUser" AS "User__User_organization_sessionsPerUser", "User__User_organization"."subscriptionStartDate" AS "User__User_organization_subscriptionStartDate", "User__User_organization"."subscriptionEndDate" AS "User__User_organization_subscriptionEndDate", "User__User_organization"."isActive" AS "User__User_organization_isActive", "User__User_organization"."createdAt" AS "User__User_organization_createdAt", "User__User_organization"."updatedAt" AS "User__User_organization_updatedAt" FROM "user" "User" LEFT JOIN "subscription" "User__User_subscriptions" ON "User__User_subscriptions"."userId"="User"."id"  LEFT JOIN "organization" "User__User_organization" ON "User__User_organization"."id"="User"."organizationId" WHERE "User"."id" IN ($1) -- PARAMETERS: ["8d645e93-6222-485e-9539-043fb8c9f100"]
query: SELECT "TherapySession"."id" AS "TherapySession_id", "TherapySession"."userId" AS "TherapySession_userId", "TherapySession"."therapistId" AS "TherapySession_therapistId", "TherapySession"."subscriptionId" AS "TherapySession_subscriptionId", "TherapySession"."status" AS "TherapySession_status", "TherapySession"."type" AS "TherapySession_type", "TherapySession"."scheduledAt" AS "TherapySession_scheduledAt", "TherapySession"."startedAt" AS "TherapySession_startedAt", "TherapySession"."endedAt" AS "TherapySession_endedAt", "TherapySession"."durationMinutes" AS "TherapySession_durationMinutes", "TherapySession"."cost" AS "TherapySession_cost", "TherapySession"."paidFromCredit" AS "TherapySession_paidFromCredit", "TherapySession"."paidFromSubscription" AS "TherapySession_paidFromSubscription", "TherapySession"."paymentReference" AS "TherapySession_paymentReference", "TherapySession"."notes" AS "TherapySession_notes", "TherapySession"."cancellationReason" AS "TherapySession_cancellationReason", "TherapySession"."meetingLink" AS "TherapySession_meetingLink", "TherapySession"."meetingId" AS "TherapySession_meetingId", "TherapySession"."createdAt" AS "TherapySession_createdAt", "TherapySession"."updatedAt" AS "TherapySession_updatedAt" FROM "therapy_session" "TherapySession" WHERE (("TherapySession"."status" = $1)) ORDER BY "TherapySession"."scheduledAt" DESC LIMIT 1 -- PARAMETERS: ["completed"]
[95m[Nest] 17457  - [39m05/26/2025, 1:36:01 PM [95m  DEBUG[39m [38;5;3m[AuthSecurity] [39m[95mPOST /api/sessions/book - 127.0.0.1 - curl/8.7.1[39m
[33m[Nest] 17457  - [39m05/26/2025, 1:36:01 PM [33m   WARN[39m [38;5;3m[AuthSecurity] [39m[33mPOST /api/sessions/book 404 - 127.0.0.1 - curl/8.7.1 - 81[39m
[95m[Nest] 17457  - [39m05/26/2025, 1:36:05 PM [95m  DEBUG[39m [38;5;3m[AuthSecurity] [39m[95mGET /api/sessions/my - 127.0.0.1 - curl/8.7.1[39m
[33m[Nest] 17457  - [39m05/26/2025, 1:36:05 PM [33m   WARN[39m [38;5;3m[AuthSecurity] [39m[33mGET /api/sessions/my 404 - 127.0.0.1 - curl/8.7.1 - 78[39m
[2J[3J[H[[90m1:43:02 PM[0m] File change detected. Starting incremental compilation...

[96msrc/app.module.ts[0m:[93m14[0m:[93m31[0m - [91merror[0m[90m TS2307: [0mCannot find module './session/session.module' or its corresponding type declarations.

[7m14[0m import { SessionModule } from './session/session.module';
[7m  [0m [91m                              ~~~~~~~~~~~~~~~~~~~~~~~~~~[0m

[[90m1:43:03 PM[0m] Found 1 error. Watching for file changes.

[2J[3J[H[[90m1:43:05 PM[0m] File change detected. Starting incremental compilation...

[96msrc/app.module.ts[0m:[93m14[0m:[93m31[0m - [91merror[0m[90m TS2307: [0mCannot find module './session/session.module' or its corresponding type declarations.

[7m14[0m import { SessionModule } from './session/session.module';
[7m  [0m [91m                              ~~~~~~~~~~~~~~~~~~~~~~~~~~[0m

[[90m1:43:06 PM[0m] Found 1 error. Watching for file changes.

[2J[3J[H[[90m1:43:17 PM[0m] File change detected. Starting incremental compilation...

[96msrc/app.module.ts[0m:[93m69[0m:[93m5[0m - [91merror[0m[90m TS2304: [0mCannot find name 'SessionModule'.

[7m69[0m     SessionModule,
[7m  [0m [91m    ~~~~~~~~~~~~~[0m

[[90m1:43:17 PM[0m] Found 1 error. Watching for file changes.

[2J[3J[H[[90m1:43:24 PM[0m] File change detected. Starting incremental compilation...

[[90m1:43:25 PM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 22828  - [39m05/26/2025, 1:43:27 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +40ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPassportModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mThrottlerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDiscoveryModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTerminusModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mScheduleModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSharedModule dependencies initialized[39m[38;5;3m +31ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mEventModule dependencies initialized[39m[38;5;3m +9ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mJwtModule dependencies initialized[39m[38;5;3m +0ms[39m
query: SELECT * FROM current_schema()
query: CREATE EXTENSION IF NOT EXISTS "uuid-ossp"
query: SELECT version();
query: START TRANSACTION
query: SELECT * FROM current_schema()
query: SELECT * FROM current_database()
query: SELECT "table_schema", "table_name", obj_description(('"' || "table_schema" || '"."' || "table_name" || '"')::regclass, 'pg_class') AS table_comment FROM "information_schema"."tables" WHERE ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session') OR ("table_schema" = 'public' AND "table_name" = 'payment')
query: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
query: SELECT columns.*, pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description, ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype", pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type" FROM "information_schema"."columns" LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr" ON "col_attr"."attname" = "columns"."column_name" AND "col_attr"."attrelid" = ( SELECT "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls" LEFT JOIN "pg_catalog"."pg_namespace" AS "ns" ON "ns"."oid" = "cls"."relnamespace" WHERE "cls"."relname" = "columns"."table_name" AND "ns"."nspname" = "columns"."table_schema" ) WHERE ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session') OR ("table_schema" = 'public' AND "table_name" = 'payment')
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name", "am"."amname" AS "index_type" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" INNER JOIN "pg_am" "am" ON "i"."relam" = "am"."oid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'public' AND "cl"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'payment')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='userType'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='role'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='method'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_usertype_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_role_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_method_enum'
query: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'typeorm_metadata'
query: COMMIT
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmCoreModule dependencies initialized[39m[38;5;3m +309ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSubscriptionModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mOrganizationModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSessionModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/api}:[39m[38;5;3m +103ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/health, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/ping, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/test-login, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthController {/api/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/register, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/verify-email, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/login, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/refresh-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/logout, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/change-password, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/forgot-password, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/reset-password, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-service-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/revoke-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/users/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mMfaController {/api/mfa}:[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/generate, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/enable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/disable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/verify, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserController {/api/users}:[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id/deactivate, PUT} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSessionController {/api/sessions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me/:sessionId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, DELETE} route[39m[38;5;3m +1ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSubscriptionController {/api/subscriptions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/plans, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/status, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/create, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/credits/purchase, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/session/:sessionId/use, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mOrganizationController {/api/organizations}:[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/create, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/subscription, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/users/add, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/users/:userId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/my/organization, GET} route[39m[38;5;3m +1ms[39m
Redis connection established
[32m[Nest] 22828  - [39m05/26/2025, 1:43:28 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +63ms[39m
Auth service is running on port 3002 and bound to all interfaces
[2J[3J[H[[90m1:44:26 PM[0m] File change detected. Starting incremental compilation...

[96msrc/subscription/subscription.controller.ts[0m:[93m80[0m:[93m43[0m - [91merror[0m[90m TS2339: [0mProperty 'useSessionFromSubscription' does not exist on type 'SubscriptionService'.

[7m80[0m     return await this.subscriptionService.useSessionFromSubscription(req.user.id, sessionId);
[7m  [0m [91m                                          ~~~~~~~~~~~~~~~~~~~~~~~~~~[0m

[[90m1:44:28 PM[0m] Found 1 error. Watching for file changes.

[2J[3J[H[[90m1:44:45 PM[0m] File change detected. Starting incremental compilation...

[[90m1:44:46 PM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 23262  - [39m05/26/2025, 1:44:49 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +49ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPassportModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mThrottlerModule dependencies initialized[39m[38;5;3m +15ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDiscoveryModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTerminusModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mScheduleModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSharedModule dependencies initialized[39m[38;5;3m +38ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mEventModule dependencies initialized[39m[38;5;3m +10ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:49 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mJwtModule dependencies initialized[39m[38;5;3m +0ms[39m
query: SELECT * FROM current_schema()
query: CREATE EXTENSION IF NOT EXISTS "uuid-ossp"
query: SELECT version();
query: START TRANSACTION
query: SELECT * FROM current_schema()
query: SELECT * FROM current_database()
query: SELECT "table_schema", "table_name", obj_description(('"' || "table_schema" || '"."' || "table_name" || '"')::regclass, 'pg_class') AS table_comment FROM "information_schema"."tables" WHERE ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session') OR ("table_schema" = 'public' AND "table_name" = 'payment')
query: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
query: SELECT columns.*, pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description, ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype", pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type" FROM "information_schema"."columns" LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr" ON "col_attr"."attname" = "columns"."column_name" AND "col_attr"."attrelid" = ( SELECT "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls" LEFT JOIN "pg_catalog"."pg_namespace" AS "ns" ON "ns"."oid" = "cls"."relnamespace" WHERE "cls"."relname" = "columns"."table_name" AND "ns"."nspname" = "columns"."table_schema" ) WHERE ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session') OR ("table_schema" = 'public' AND "table_name" = 'payment')
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name", "am"."amname" AS "index_type" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" INNER JOIN "pg_am" "am" ON "i"."relam" = "am"."oid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'public' AND "cl"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'payment')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='userType'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='role'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='method'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_usertype_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_role_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_method_enum'
query: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'typeorm_metadata'
query: COMMIT
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmCoreModule dependencies initialized[39m[38;5;3m +328ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSubscriptionModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mOrganizationModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSessionModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/api}:[39m[38;5;3m +118ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/health, GET} route[39m[38;5;3m +3ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/ping, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/test-login, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthController {/api/auth}:[39m[38;5;3m +1ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/register, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/verify-email, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/login, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/refresh-token, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/logout, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/change-password, PATCH} route[39m[38;5;3m +1ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/forgot-password, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/reset-password, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-service-token, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/revoke-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/users/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mMfaController {/api/mfa}:[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/generate, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/enable, POST} route[39m[38;5;3m +2ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/disable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/verify, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserController {/api/users}:[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id/deactivate, PUT} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSessionController {/api/sessions}:[39m[38;5;3m +1ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me/:sessionId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSubscriptionController {/api/subscriptions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/plans, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/status, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/create, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/credits/purchase, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/validate-booking/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/consume-session/:userId, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mOrganizationController {/api/organizations}:[39m[38;5;3m +1ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/create, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/subscription, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/users/add, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/users/:userId, DELETE} route[39m[38;5;3m +1ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/my/organization, GET} route[39m[38;5;3m +0ms[39m
Redis connection established
[32m[Nest] 23262  - [39m05/26/2025, 1:44:50 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +65ms[39m
Auth service is running on port 3002 and bound to all interfaces
[2J[3J[H[[90m1:45:03 PM[0m] File change detected. Starting incremental compilation...

[96msrc/subscription/subscription.service.ts[0m:[93m226[0m:[93m36[0m - [91merror[0m[90m TS2339: [0mProperty 'getLastSession' does not exist on type 'SubscriptionService'.

[7m226[0m     const lastSession = await this.getLastSession(userId);
[7m   [0m [91m                                   ~~~~~~~~~~~~~~[0m

[96msrc/subscription/subscription.service.ts[0m:[93m227[0m:[93m39[0m - [91merror[0m[90m TS2339: [0mProperty 'canUserBookSession' does not exist on type 'SubscriptionService'.

[7m227[0m     const canBookSession = await this.canUserBookSession(userId, lastSession);
[7m   [0m [91m                                      ~~~~~~~~~~~~~~~~~~[0m

[[90m1:45:04 PM[0m] Found 2 errors. Watching for file changes.

[2J[3J[H[[90m1:45:20 PM[0m] File change detected. Starting incremental compilation...

[96msrc/subscription/subscription.service.ts[0m:[93m68[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'TherapySession'.

[7m68[0m     @InjectRepository(TherapySession)
[7m  [0m [91m                      ~~~~~~~~~~~~~~[0m

[96msrc/subscription/subscription.service.ts[0m:[93m69[0m:[93m43[0m - [91merror[0m[90m TS2304: [0mCannot find name 'TherapySession'.

[7m69[0m     private sessionRepository: Repository<TherapySession>,
[7m  [0m [91m                                          ~~~~~~~~~~~~~~[0m

[96msrc/subscription/subscription.service.ts[0m:[93m225[0m:[93m36[0m - [91merror[0m[90m TS2339: [0mProperty 'getLastSession' does not exist on type 'SubscriptionService'.

[7m225[0m     const lastSession = await this.getLastSession(userId);
[7m   [0m [91m                                   ~~~~~~~~~~~~~~[0m

[96msrc/subscription/subscription.service.ts[0m:[93m226[0m:[93m39[0m - [91merror[0m[90m TS2339: [0mProperty 'canUserBookSession' does not exist on type 'SubscriptionService'.

[7m226[0m     const canBookSession = await this.canUserBookSession(userId, lastSession);
[7m   [0m [91m                                      ~~~~~~~~~~~~~~~~~~[0m

[[90m1:45:21 PM[0m] Found 4 errors. Watching for file changes.

[2J[3J[H[[90m1:45:32 PM[0m] File change detected. Starting incremental compilation...

[96msrc/subscription/subscription.service.ts[0m:[93m223[0m:[93m36[0m - [91merror[0m[90m TS2339: [0mProperty 'getLastSession' does not exist on type 'SubscriptionService'.

[7m223[0m     const lastSession = await this.getLastSession(userId);
[7m   [0m [91m                                   ~~~~~~~~~~~~~~[0m

[96msrc/subscription/subscription.service.ts[0m:[93m224[0m:[93m39[0m - [91merror[0m[90m TS2339: [0mProperty 'canUserBookSession' does not exist on type 'SubscriptionService'.

[7m224[0m     const canBookSession = await this.canUserBookSession(userId, lastSession);
[7m   [0m [91m                                      ~~~~~~~~~~~~~~~~~~[0m

[[90m1:45:33 PM[0m] Found 2 errors. Watching for file changes.

[2J[3J[H[[90m1:45:48 PM[0m] File change detected. Starting incremental compilation...

[96msrc/subscription/subscription.service.ts[0m:[93m223[0m:[93m36[0m - [91merror[0m[90m TS2339: [0mProperty 'getLastSession' does not exist on type 'SubscriptionService'.

[7m223[0m     const lastSession = await this.getLastSession(userId);
[7m   [0m [91m                                   ~~~~~~~~~~~~~~[0m

[96msrc/subscription/subscription.service.ts[0m:[93m224[0m:[93m39[0m - [91merror[0m[90m TS2339: [0mProperty 'canUserBookSession' does not exist on type 'SubscriptionService'.

[7m224[0m     const canBookSession = await this.canUserBookSession(userId, lastSession);
[7m   [0m [91m                                      ~~~~~~~~~~~~~~~~~~[0m

[[90m1:45:49 PM[0m] Found 2 errors. Watching for file changes.

[2J[3J[H[[90m1:46:08 PM[0m] File change detected. Starting incremental compilation...

[[90m1:46:10 PM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +50ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPassportModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mThrottlerModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDiscoveryModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTerminusModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mScheduleModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSharedModule dependencies initialized[39m[38;5;3m +38ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mEventModule dependencies initialized[39m[38;5;3m +9ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mJwtModule dependencies initialized[39m[38;5;3m +1ms[39m
query: SELECT * FROM current_schema()
query: CREATE EXTENSION IF NOT EXISTS "uuid-ossp"
query: SELECT version();
query: START TRANSACTION
query: SELECT * FROM current_schema()
query: SELECT * FROM current_database()
query: SELECT "table_schema", "table_name", obj_description(('"' || "table_schema" || '"."' || "table_name" || '"')::regclass, 'pg_class') AS table_comment FROM "information_schema"."tables" WHERE ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'payment') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session')
query: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
query: SELECT columns.*, pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description, ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype", pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type" FROM "information_schema"."columns" LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr" ON "col_attr"."attname" = "columns"."column_name" AND "col_attr"."attrelid" = ( SELECT "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls" LEFT JOIN "pg_catalog"."pg_namespace" AS "ns" ON "ns"."oid" = "cls"."relnamespace" WHERE "cls"."relname" = "columns"."table_name" AND "ns"."nspname" = "columns"."table_schema" ) WHERE ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session') OR ("table_schema" = 'public' AND "table_name" = 'payment')
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name", "am"."amname" AS "index_type" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" INNER JOIN "pg_am" "am" ON "i"."relam" = "am"."oid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'public' AND "cl"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'payment')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='userType'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='role'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='method'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_usertype_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_role_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_method_enum'
query: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'typeorm_metadata'
query: COMMIT
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmCoreModule dependencies initialized[39m[38;5;3m +219ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSubscriptionModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mOrganizationModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSessionModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/api}:[39m[38;5;3m +91ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/health, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/ping, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/test-login, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthController {/api/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/register, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/verify-email, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/login, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/refresh-token, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/logout, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/change-password, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/forgot-password, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/reset-password, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-service-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/revoke-token, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/users/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mMfaController {/api/mfa}:[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/generate, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/enable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/disable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/verify, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserController {/api/users}:[39m[38;5;3m +1ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id/deactivate, PUT} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSessionController {/api/sessions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me/:sessionId, DELETE} route[39m[38;5;3m +1ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSubscriptionController {/api/subscriptions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/plans, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/status, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/create, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/credits/purchase, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/validate-booking/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/consume-session/:userId, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mOrganizationController {/api/organizations}:[39m[38;5;3m +1ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/create, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/subscription, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/users/add, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/users/:userId, DELETE} route[39m[38;5;3m +1ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/my/organization, GET} route[39m[38;5;3m +0ms[39m
Redis connection established
[32m[Nest] 23721  - [39m05/26/2025, 1:46:13 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +22ms[39m
Auth service is running on port 3002 and bound to all interfaces
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."id" = $1)) LIMIT 1 -- PARAMETERS: ["8d645e93-6222-485e-9539-043fb8c9f100"]
query: SELECT DISTINCT "distinctAlias"."User_id" AS "ids_User_id" FROM (SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt", "User__User_subscriptions"."id" AS "User__User_subscriptions_id", "User__User_subscriptions"."userId" AS "User__User_subscriptions_userId", "User__User_subscriptions"."type" AS "User__User_subscriptions_type", "User__User_subscriptions"."status" AS "User__User_subscriptions_status", "User__User_subscriptions"."amount" AS "User__User_subscriptions_amount", "User__User_subscriptions"."sessionsIncluded" AS "User__User_subscriptions_sessionsIncluded", "User__User_subscriptions"."sessionsUsed" AS "User__User_subscriptions_sessionsUsed", "User__User_subscriptions"."creditsAvailable" AS "User__User_subscriptions_creditsAvailable", "User__User_subscriptions"."startDate" AS "User__User_subscriptions_startDate", "User__User_subscriptions"."endDate" AS "User__User_subscriptions_endDate", "User__User_subscriptions"."lastSessionDate" AS "User__User_subscriptions_lastSessionDate", "User__User_subscriptions"."autoRenew" AS "User__User_subscriptions_autoRenew", "User__User_subscriptions"."paymentReference" AS "User__User_subscriptions_paymentReference", "User__User_subscriptions"."notes" AS "User__User_subscriptions_notes", "User__User_subscriptions"."createdAt" AS "User__User_subscriptions_createdAt", "User__User_subscriptions"."updatedAt" AS "User__User_subscriptions_updatedAt", "User__User_organization"."id" AS "User__User_organization_id", "User__User_organization"."name" AS "User__User_organization_name", "User__User_organization"."description" AS "User__User_organization_description", "User__User_organization"."email" AS "User__User_organization_email", "User__User_organization"."phoneNumber" AS "User__User_organization_phoneNumber", "User__User_organization"."address" AS "User__User_organization_address", "User__User_organization"."status" AS "User__User_organization_status", "User__User_organization"."maxUsers" AS "User__User_organization_maxUsers", "User__User_organization"."currentUsers" AS "User__User_organization_currentUsers", "User__User_organization"."pricePerUser" AS "User__User_organization_pricePerUser", "User__User_organization"."sessionsPerUser" AS "User__User_organization_sessionsPerUser", "User__User_organization"."subscriptionStartDate" AS "User__User_organization_subscriptionStartDate", "User__User_organization"."subscriptionEndDate" AS "User__User_organization_subscriptionEndDate", "User__User_organization"."isActive" AS "User__User_organization_isActive", "User__User_organization"."createdAt" AS "User__User_organization_createdAt", "User__User_organization"."updatedAt" AS "User__User_organization_updatedAt" FROM "user" "User" LEFT JOIN "subscription" "User__User_subscriptions" ON "User__User_subscriptions"."userId"="User"."id"  LEFT JOIN "organization" "User__User_organization" ON "User__User_organization"."id"="User"."organizationId") "distinctAlias" ORDER BY "User_id" ASC LIMIT 1
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt", "User__User_subscriptions"."id" AS "User__User_subscriptions_id", "User__User_subscriptions"."userId" AS "User__User_subscriptions_userId", "User__User_subscriptions"."type" AS "User__User_subscriptions_type", "User__User_subscriptions"."status" AS "User__User_subscriptions_status", "User__User_subscriptions"."amount" AS "User__User_subscriptions_amount", "User__User_subscriptions"."sessionsIncluded" AS "User__User_subscriptions_sessionsIncluded", "User__User_subscriptions"."sessionsUsed" AS "User__User_subscriptions_sessionsUsed", "User__User_subscriptions"."creditsAvailable" AS "User__User_subscriptions_creditsAvailable", "User__User_subscriptions"."startDate" AS "User__User_subscriptions_startDate", "User__User_subscriptions"."endDate" AS "User__User_subscriptions_endDate", "User__User_subscriptions"."lastSessionDate" AS "User__User_subscriptions_lastSessionDate", "User__User_subscriptions"."autoRenew" AS "User__User_subscriptions_autoRenew", "User__User_subscriptions"."paymentReference" AS "User__User_subscriptions_paymentReference", "User__User_subscriptions"."notes" AS "User__User_subscriptions_notes", "User__User_subscriptions"."createdAt" AS "User__User_subscriptions_createdAt", "User__User_subscriptions"."updatedAt" AS "User__User_subscriptions_updatedAt", "User__User_organization"."id" AS "User__User_organization_id", "User__User_organization"."name" AS "User__User_organization_name", "User__User_organization"."description" AS "User__User_organization_description", "User__User_organization"."email" AS "User__User_organization_email", "User__User_organization"."phoneNumber" AS "User__User_organization_phoneNumber", "User__User_organization"."address" AS "User__User_organization_address", "User__User_organization"."status" AS "User__User_organization_status", "User__User_organization"."maxUsers" AS "User__User_organization_maxUsers", "User__User_organization"."currentUsers" AS "User__User_organization_currentUsers", "User__User_organization"."pricePerUser" AS "User__User_organization_pricePerUser", "User__User_organization"."sessionsPerUser" AS "User__User_organization_sessionsPerUser", "User__User_organization"."subscriptionStartDate" AS "User__User_organization_subscriptionStartDate", "User__User_organization"."subscriptionEndDate" AS "User__User_organization_subscriptionEndDate", "User__User_organization"."isActive" AS "User__User_organization_isActive", "User__User_organization"."createdAt" AS "User__User_organization_createdAt", "User__User_organization"."updatedAt" AS "User__User_organization_updatedAt" FROM "user" "User" LEFT JOIN "subscription" "User__User_subscriptions" ON "User__User_subscriptions"."userId"="User"."id"  LEFT JOIN "organization" "User__User_organization" ON "User__User_organization"."id"="User"."organizationId" WHERE "User"."id" IN ($1) -- PARAMETERS: ["12710f17-41f0-460d-8624-e8532537a664"]
[2J[3J[H[[90m1:47:26 PM[0m] File change detected. Starting incremental compilation...

[[90m1:47:27 PM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 24130  - [39m05/26/2025, 1:47:30 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +51ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPassportModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mThrottlerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDiscoveryModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTerminusModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mScheduleModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSharedModule dependencies initialized[39m[38;5;3m +38ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mEventModule dependencies initialized[39m[38;5;3m +11ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mJwtModule dependencies initialized[39m[38;5;3m +1ms[39m
query: SELECT * FROM current_schema()
query: CREATE EXTENSION IF NOT EXISTS "uuid-ossp"
query: SELECT version();
query: START TRANSACTION
query: SELECT * FROM current_schema()
query: SELECT * FROM current_database()
query: SELECT "table_schema", "table_name", obj_description(('"' || "table_schema" || '"."' || "table_name" || '"')::regclass, 'pg_class') AS table_comment FROM "information_schema"."tables" WHERE ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'payment') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session')
query: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
query: SELECT columns.*, pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description, ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype", pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type" FROM "information_schema"."columns" LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr" ON "col_attr"."attname" = "columns"."column_name" AND "col_attr"."attrelid" = ( SELECT "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls" LEFT JOIN "pg_catalog"."pg_namespace" AS "ns" ON "ns"."oid" = "cls"."relnamespace" WHERE "cls"."relname" = "columns"."table_name" AND "ns"."nspname" = "columns"."table_schema" ) WHERE ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session') OR ("table_schema" = 'public' AND "table_name" = 'payment')
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name", "am"."amname" AS "index_type" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" INNER JOIN "pg_am" "am" ON "i"."relam" = "am"."oid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'public' AND "cl"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'payment')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='userType'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='role'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='method'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_usertype_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_role_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_method_enum'
query: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'typeorm_metadata'
query: COMMIT
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmCoreModule dependencies initialized[39m[38;5;3m +367ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSubscriptionModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mOrganizationModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSessionModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/api}:[39m[38;5;3m +96ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/health, GET} route[39m[38;5;3m +3ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/ping, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/test-login, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthController {/api/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/register, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/verify-email, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/login, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/refresh-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/logout, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/change-password, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/forgot-password, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/reset-password, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-service-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/revoke-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/users/:userId, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mMfaController {/api/mfa}:[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/generate, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/enable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/disable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/verify, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserController {/api/users}:[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id/deactivate, PUT} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSessionController {/api/sessions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me/:sessionId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, DELETE} route[39m[38;5;3m +1ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSubscriptionController {/api/subscriptions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/plans, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/status, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/create, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/credits/purchase, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/validate-booking/:userId, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/consume-session/:userId, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mOrganizationController {/api/organizations}:[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/create, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/subscription, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/users/add, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/users/:userId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/my/organization, GET} route[39m[38;5;3m +0ms[39m
Redis connection established
[32m[Nest] 24130  - [39m05/26/2025, 1:47:31 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +21ms[39m
Auth service is running on port 3002 and bound to all interfaces
[2J[3J[H[[90m1:47:52 PM[0m] File change detected. Starting incremental compilation...

[[90m1:47:53 PM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +42ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPassportModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mThrottlerModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDiscoveryModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTerminusModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mScheduleModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSharedModule dependencies initialized[39m[38;5;3m +36ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mEventModule dependencies initialized[39m[38;5;3m +8ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mJwtModule dependencies initialized[39m[38;5;3m +0ms[39m
query: SELECT * FROM current_schema()
query: CREATE EXTENSION IF NOT EXISTS "uuid-ossp"
query: SELECT version();
query: START TRANSACTION
query: SELECT * FROM current_schema()
query: SELECT * FROM current_database()
query: SELECT "table_schema", "table_name", obj_description(('"' || "table_schema" || '"."' || "table_name" || '"')::regclass, 'pg_class') AS table_comment FROM "information_schema"."tables" WHERE ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'payment') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session')
query: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
query: SELECT columns.*, pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description, ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype", pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type" FROM "information_schema"."columns" LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr" ON "col_attr"."attname" = "columns"."column_name" AND "col_attr"."attrelid" = ( SELECT "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls" LEFT JOIN "pg_catalog"."pg_namespace" AS "ns" ON "ns"."oid" = "cls"."relnamespace" WHERE "cls"."relname" = "columns"."table_name" AND "ns"."nspname" = "columns"."table_schema" ) WHERE ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session') OR ("table_schema" = 'public' AND "table_name" = 'payment')
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name", "am"."amname" AS "index_type" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" INNER JOIN "pg_am" "am" ON "i"."relam" = "am"."oid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'public' AND "cl"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'payment')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='userType'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='role'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='method'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_usertype_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_role_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_method_enum'
query: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'typeorm_metadata'
query: COMMIT
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmCoreModule dependencies initialized[39m[38;5;3m +217ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSubscriptionModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mOrganizationModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSessionModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:56 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/api}:[39m[38;5;3m +93ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/health, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/ping, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/test-login, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthController {/api/auth}:[39m[38;5;3m +1ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/register, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/verify-email, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/login, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/refresh-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/logout, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/change-password, PATCH} route[39m[38;5;3m +1ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/forgot-password, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/reset-password, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-service-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/revoke-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/users/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mMfaController {/api/mfa}:[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/generate, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/enable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/disable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/verify, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserController {/api/users}:[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id/deactivate, PUT} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSessionController {/api/sessions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me/:sessionId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, DELETE} route[39m[38;5;3m +1ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSubscriptionController {/api/subscriptions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/plans, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/status, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/create, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/credits/purchase, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/validate-booking/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/consume-session/:userId, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mOrganizationController {/api/organizations}:[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/create, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/subscription, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/users/add, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/users/:userId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/my/organization, GET} route[39m[38;5;3m +0ms[39m
Redis connection established
[32m[Nest] 24287  - [39m05/26/2025, 1:47:57 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +18ms[39m
Auth service is running on port 3002 and bound to all interfaces
[95m[Nest] 24287  - [39m05/26/2025, 1:49:11 PM [95m  DEBUG[39m [38;5;3m[AuthSecurity] [39m[95mPOST /api/auth/login - 127.0.0.1 - curl/8.7.1[39m
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."email" = $1)) LIMIT 1 -- PARAMETERS: ["john@example.com"]
query: SELECT "UserSession"."id" AS "UserSession_id", "UserSession"."userId" AS "UserSession_userId", "UserSession"."refreshToken" AS "UserSession_refreshToken", "UserSession"."ipAddress" AS "UserSession_ipAddress", "UserSession"."userAgent" AS "UserSession_userAgent", "UserSession"."deviceInfo" AS "UserSession_deviceInfo", "UserSession"."lastUsedAt" AS "UserSession_lastUsedAt", "UserSession"."isRevoked" AS "UserSession_isRevoked", "UserSession"."revokedAt" AS "UserSession_revokedAt", "UserSession"."revokedReason" AS "UserSession_revokedReason", "UserSession"."status" AS "UserSession_status", "UserSession"."endedAt" AS "UserSession_endedAt", "UserSession"."createdAt" AS "UserSession_createdAt", "UserSession"."updatedAt" AS "UserSession_updatedAt", "UserSession"."expiresAt" AS "UserSession_expiresAt" FROM "user_session" "UserSession" WHERE (("UserSession"."id" = $1)) LIMIT 1 -- PARAMETERS: ["0c9a6fd7-6024-499e-954a-c2a8d575c866"]
query: SELECT "UserSession"."id" AS "UserSession_id", "UserSession"."userId" AS "UserSession_userId", "UserSession"."refreshToken" AS "UserSession_refreshToken", "UserSession"."ipAddress" AS "UserSession_ipAddress", "UserSession"."userAgent" AS "UserSession_userAgent", "UserSession"."deviceInfo" AS "UserSession_deviceInfo", "UserSession"."lastUsedAt" AS "UserSession_lastUsedAt", "UserSession"."isRevoked" AS "UserSession_isRevoked", "UserSession"."revokedAt" AS "UserSession_revokedAt", "UserSession"."revokedReason" AS "UserSession_revokedReason", "UserSession"."status" AS "UserSession_status", "UserSession"."endedAt" AS "UserSession_endedAt", "UserSession"."createdAt" AS "UserSession_createdAt", "UserSession"."updatedAt" AS "UserSession_updatedAt", "UserSession"."expiresAt" AS "UserSession_expiresAt" FROM "user_session" "UserSession" WHERE "UserSession"."id" IN ($1) -- PARAMETERS: ["0c9a6fd7-6024-499e-954a-c2a8d575c866"]
query: START TRANSACTION
query: INSERT INTO "user_session"("id", "userId", "refreshToken", "ipAddress", "userAgent", "deviceInfo", "lastUsedAt", "isRevoked", "revokedAt", "revokedReason", "status", "endedAt", "createdAt", "updatedAt", "expiresAt") VALUES ($1, $2, $3, DEFAULT, $4, $5, $6, $7, DEFAULT, DEFAULT, DEFAULT, DEFAULT, $8, $9, $10) RETURNING "id", "isRevoked", "status", "createdAt", "updatedAt" -- PARAMETERS: ["0c9a6fd7-6024-499e-954a-c2a8d575c866","8d645e93-6222-485e-9539-043fb8c9f100","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI4ZDY0NWU5My02MjIyLTQ4NWUtOTUzOS0wNDNmYjhjOWYxMDAiLCJlbWFpbCI6ImpvaG5AZXhhbXBsZS5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc0ODI1NjU1MSwiZXhwIjoxNzQ4ODYxMzUxfQ.JqJZTXWH5TgVmL7o0bzqax-WjkC4Osc611F7AXAC1ws","curl/8.7.1","curl/8.7.1","2025-05-26T10:49:11.745Z",0,"2025-05-26T10:49:11.745Z","2025-05-26T10:49:11.745Z","2025-06-02T10:49:11.745Z"]
query: COMMIT
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."id" = $1)) LIMIT 1 -- PARAMETERS: ["8d645e93-6222-485e-9539-043fb8c9f100"]
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE "User"."id" IN ($1) -- PARAMETERS: ["8d645e93-6222-485e-9539-043fb8c9f100"]
query: START TRANSACTION
query: UPDATE "user" SET "lastLogin" = $1, "updatedAt" = CURRENT_TIMESTAMP WHERE "id" IN ($2) RETURNING "updatedAt" -- PARAMETERS: ["2025-05-26T10:49:11.815Z","8d645e93-6222-485e-9539-043fb8c9f100"]
query: COMMIT
[95m[Nest] 24287  - [39m05/26/2025, 1:49:11 PM [95m  DEBUG[39m [38;5;3m[EventService] [39m[95m[EVENT EMITTED] auth.login.success[39m
[95m[Nest] 24287  - [39m05/26/2025, 1:49:11 PM [95m  DEBUG[39m [38;5;3m[EventService] [39m[95mObject:[39m
{
  "event": {
    "type": "auth.login.success",
    "payload": {
      "userId": "8d645e93-6222-485e-9539-043fb8c9f100",
      "sessionId": "0c9a6fd7-6024-499e-954a-c2a8d575c866"
    },
    "metadata": {
      "userId": "8d645e93-6222-485e-9539-043fb8c9f100",
      "metadata": {
        "userAgent": "curl/8.7.1",
        "deviceInfo": "curl/8.7.1"
      },
      "timestamp": "2025-05-26T10:49:11.826Z"
    }
  }
}

[95m[Nest] 24287  - [39m05/26/2025, 1:49:11 PM [95m  DEBUG[39m [38;5;3m[AuthSecurity] [39m[95mPOST /api/auth/login 200 - 127.0.0.1 - curl/8.7.1 - 698[39m
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."id" = $1)) LIMIT 1 -- PARAMETERS: ["8d645e93-6222-485e-9539-043fb8c9f100"]
query: SELECT DISTINCT "distinctAlias"."User_id" AS "ids_User_id" FROM (SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt", "User__User_subscriptions"."id" AS "User__User_subscriptions_id", "User__User_subscriptions"."userId" AS "User__User_subscriptions_userId", "User__User_subscriptions"."type" AS "User__User_subscriptions_type", "User__User_subscriptions"."status" AS "User__User_subscriptions_status", "User__User_subscriptions"."amount" AS "User__User_subscriptions_amount", "User__User_subscriptions"."sessionsIncluded" AS "User__User_subscriptions_sessionsIncluded", "User__User_subscriptions"."sessionsUsed" AS "User__User_subscriptions_sessionsUsed", "User__User_subscriptions"."creditsAvailable" AS "User__User_subscriptions_creditsAvailable", "User__User_subscriptions"."startDate" AS "User__User_subscriptions_startDate", "User__User_subscriptions"."endDate" AS "User__User_subscriptions_endDate", "User__User_subscriptions"."lastSessionDate" AS "User__User_subscriptions_lastSessionDate", "User__User_subscriptions"."autoRenew" AS "User__User_subscriptions_autoRenew", "User__User_subscriptions"."paymentReference" AS "User__User_subscriptions_paymentReference", "User__User_subscriptions"."notes" AS "User__User_subscriptions_notes", "User__User_subscriptions"."createdAt" AS "User__User_subscriptions_createdAt", "User__User_subscriptions"."updatedAt" AS "User__User_subscriptions_updatedAt", "User__User_organization"."id" AS "User__User_organization_id", "User__User_organization"."name" AS "User__User_organization_name", "User__User_organization"."description" AS "User__User_organization_description", "User__User_organization"."email" AS "User__User_organization_email", "User__User_organization"."phoneNumber" AS "User__User_organization_phoneNumber", "User__User_organization"."address" AS "User__User_organization_address", "User__User_organization"."status" AS "User__User_organization_status", "User__User_organization"."maxUsers" AS "User__User_organization_maxUsers", "User__User_organization"."currentUsers" AS "User__User_organization_currentUsers", "User__User_organization"."pricePerUser" AS "User__User_organization_pricePerUser", "User__User_organization"."sessionsPerUser" AS "User__User_organization_sessionsPerUser", "User__User_organization"."subscriptionStartDate" AS "User__User_organization_subscriptionStartDate", "User__User_organization"."subscriptionEndDate" AS "User__User_organization_subscriptionEndDate", "User__User_organization"."isActive" AS "User__User_organization_isActive", "User__User_organization"."createdAt" AS "User__User_organization_createdAt", "User__User_organization"."updatedAt" AS "User__User_organization_updatedAt" FROM "user" "User" LEFT JOIN "subscription" "User__User_subscriptions" ON "User__User_subscriptions"."userId"="User"."id"  LEFT JOIN "organization" "User__User_organization" ON "User__User_organization"."id"="User"."organizationId") "distinctAlias" ORDER BY "User_id" ASC LIMIT 1
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt", "User__User_subscriptions"."id" AS "User__User_subscriptions_id", "User__User_subscriptions"."userId" AS "User__User_subscriptions_userId", "User__User_subscriptions"."type" AS "User__User_subscriptions_type", "User__User_subscriptions"."status" AS "User__User_subscriptions_status", "User__User_subscriptions"."amount" AS "User__User_subscriptions_amount", "User__User_subscriptions"."sessionsIncluded" AS "User__User_subscriptions_sessionsIncluded", "User__User_subscriptions"."sessionsUsed" AS "User__User_subscriptions_sessionsUsed", "User__User_subscriptions"."creditsAvailable" AS "User__User_subscriptions_creditsAvailable", "User__User_subscriptions"."startDate" AS "User__User_subscriptions_startDate", "User__User_subscriptions"."endDate" AS "User__User_subscriptions_endDate", "User__User_subscriptions"."lastSessionDate" AS "User__User_subscriptions_lastSessionDate", "User__User_subscriptions"."autoRenew" AS "User__User_subscriptions_autoRenew", "User__User_subscriptions"."paymentReference" AS "User__User_subscriptions_paymentReference", "User__User_subscriptions"."notes" AS "User__User_subscriptions_notes", "User__User_subscriptions"."createdAt" AS "User__User_subscriptions_createdAt", "User__User_subscriptions"."updatedAt" AS "User__User_subscriptions_updatedAt", "User__User_organization"."id" AS "User__User_organization_id", "User__User_organization"."name" AS "User__User_organization_name", "User__User_organization"."description" AS "User__User_organization_description", "User__User_organization"."email" AS "User__User_organization_email", "User__User_organization"."phoneNumber" AS "User__User_organization_phoneNumber", "User__User_organization"."address" AS "User__User_organization_address", "User__User_organization"."status" AS "User__User_organization_status", "User__User_organization"."maxUsers" AS "User__User_organization_maxUsers", "User__User_organization"."currentUsers" AS "User__User_organization_currentUsers", "User__User_organization"."pricePerUser" AS "User__User_organization_pricePerUser", "User__User_organization"."sessionsPerUser" AS "User__User_organization_sessionsPerUser", "User__User_organization"."subscriptionStartDate" AS "User__User_organization_subscriptionStartDate", "User__User_organization"."subscriptionEndDate" AS "User__User_organization_subscriptionEndDate", "User__User_organization"."isActive" AS "User__User_organization_isActive", "User__User_organization"."createdAt" AS "User__User_organization_createdAt", "User__User_organization"."updatedAt" AS "User__User_organization_updatedAt" FROM "user" "User" LEFT JOIN "subscription" "User__User_subscriptions" ON "User__User_subscriptions"."userId"="User"."id"  LEFT JOIN "organization" "User__User_organization" ON "User__User_organization"."id"="User"."organizationId" WHERE "User"."id" IN ($1) -- PARAMETERS: ["12710f17-41f0-460d-8624-e8532537a664"]
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt" FROM "user" "User" WHERE (("User"."id" = $1)) LIMIT 1 -- PARAMETERS: ["8d645e93-6222-485e-9539-043fb8c9f100"]
query: SELECT DISTINCT "distinctAlias"."User_id" AS "ids_User_id" FROM (SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt", "User__User_organization"."id" AS "User__User_organization_id", "User__User_organization"."name" AS "User__User_organization_name", "User__User_organization"."description" AS "User__User_organization_description", "User__User_organization"."email" AS "User__User_organization_email", "User__User_organization"."phoneNumber" AS "User__User_organization_phoneNumber", "User__User_organization"."address" AS "User__User_organization_address", "User__User_organization"."status" AS "User__User_organization_status", "User__User_organization"."maxUsers" AS "User__User_organization_maxUsers", "User__User_organization"."currentUsers" AS "User__User_organization_currentUsers", "User__User_organization"."pricePerUser" AS "User__User_organization_pricePerUser", "User__User_organization"."sessionsPerUser" AS "User__User_organization_sessionsPerUser", "User__User_organization"."subscriptionStartDate" AS "User__User_organization_subscriptionStartDate", "User__User_organization"."subscriptionEndDate" AS "User__User_organization_subscriptionEndDate", "User__User_organization"."isActive" AS "User__User_organization_isActive", "User__User_organization"."createdAt" AS "User__User_organization_createdAt", "User__User_organization"."updatedAt" AS "User__User_organization_updatedAt" FROM "user" "User" LEFT JOIN "organization" "User__User_organization" ON "User__User_organization"."id"="User"."organizationId") "distinctAlias" ORDER BY "User_id" ASC LIMIT 1
query: SELECT "User"."id" AS "User_id", "User"."email" AS "User_email", "User"."password" AS "User_password", "User"."firstName" AS "User_firstName", "User"."lastName" AS "User_lastName", "User"."phoneNumber" AS "User_phoneNumber", "User"."role" AS "User_role", "User"."status" AS "User_status", "User"."userType" AS "User_userType", "User"."emailVerified" AS "User_emailVerified", "User"."verificationToken" AS "User_verificationToken", "User"."resetPasswordToken" AS "User_resetPasswordToken", "User"."resetPasswordExpires" AS "User_resetPasswordExpires", "User"."twoFactorEnabled" AS "User_twoFactorEnabled", "User"."twoFactorSecret" AS "User_twoFactorSecret", "User"."lastLogin" AS "User_lastLogin", "User"."organizationId" AS "User_organizationId", "User"."dateOfBirth" AS "User_dateOfBirth", "User"."isMinor" AS "User_isMinor", "User"."guardianEmail" AS "User_guardianEmail", "User"."guardianPhone" AS "User_guardianPhone", "User"."createdAt" AS "User_createdAt", "User"."updatedAt" AS "User_updatedAt", "User__User_organization"."id" AS "User__User_organization_id", "User__User_organization"."name" AS "User__User_organization_name", "User__User_organization"."description" AS "User__User_organization_description", "User__User_organization"."email" AS "User__User_organization_email", "User__User_organization"."phoneNumber" AS "User__User_organization_phoneNumber", "User__User_organization"."address" AS "User__User_organization_address", "User__User_organization"."status" AS "User__User_organization_status", "User__User_organization"."maxUsers" AS "User__User_organization_maxUsers", "User__User_organization"."currentUsers" AS "User__User_organization_currentUsers", "User__User_organization"."pricePerUser" AS "User__User_organization_pricePerUser", "User__User_organization"."sessionsPerUser" AS "User__User_organization_sessionsPerUser", "User__User_organization"."subscriptionStartDate" AS "User__User_organization_subscriptionStartDate", "User__User_organization"."subscriptionEndDate" AS "User__User_organization_subscriptionEndDate", "User__User_organization"."isActive" AS "User__User_organization_isActive", "User__User_organization"."createdAt" AS "User__User_organization_createdAt", "User__User_organization"."updatedAt" AS "User__User_organization_updatedAt" FROM "user" "User" LEFT JOIN "organization" "User__User_organization" ON "User__User_organization"."id"="User"."organizationId" WHERE "User"."id" IN ($1) -- PARAMETERS: ["12710f17-41f0-460d-8624-e8532537a664"]
[2J[3J[H[[90m1:59:24 PM[0m] File change detected. Starting incremental compilation...

[[90m1:59:25 PM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 27781  - [39m05/26/2025, 1:59:29 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +65ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPassportModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mThrottlerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDiscoveryModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTerminusModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mScheduleModule dependencies initialized[39m[38;5;3m +3ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSharedModule dependencies initialized[39m[38;5;3m +52ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mEventModule dependencies initialized[39m[38;5;3m +11ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mJwtModule dependencies initialized[39m[38;5;3m +0ms[39m
query: SELECT * FROM current_schema()
query: CREATE EXTENSION IF NOT EXISTS "uuid-ossp"
query: SELECT version();
query: START TRANSACTION
query: SELECT * FROM current_schema()
query: SELECT * FROM current_database()
query: SELECT "table_schema", "table_name", obj_description(('"' || "table_schema" || '"."' || "table_name" || '"')::regclass, 'pg_class') AS table_comment FROM "information_schema"."tables" WHERE ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'payment') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session')
query: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
query: SELECT columns.*, pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description, ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype", pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type" FROM "information_schema"."columns" LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr" ON "col_attr"."attname" = "columns"."column_name" AND "col_attr"."attrelid" = ( SELECT "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls" LEFT JOIN "pg_catalog"."pg_namespace" AS "ns" ON "ns"."oid" = "cls"."relnamespace" WHERE "cls"."relname" = "columns"."table_name" AND "ns"."nspname" = "columns"."table_schema" ) WHERE ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session') OR ("table_schema" = 'public' AND "table_name" = 'payment')
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name", "am"."amname" AS "index_type" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" INNER JOIN "pg_am" "am" ON "i"."relam" = "am"."oid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'public' AND "cl"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'payment')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='userType'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='role'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='method'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_usertype_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_role_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_method_enum'
query: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'typeorm_metadata'
query: COMMIT
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmCoreModule dependencies initialized[39m[38;5;3m +274ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSubscriptionModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mOrganizationModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSessionModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/api}:[39m[38;5;3m +113ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/health, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/ping, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/test-login, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthController {/api/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/register, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/verify-email, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/login, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/refresh-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/logout, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/change-password, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/forgot-password, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/reset-password, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-service-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/revoke-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/users/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mMfaController {/api/mfa}:[39m[38;5;3m +1ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/generate, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/enable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/disable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/verify, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserController {/api/users}:[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id/deactivate, PUT} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSessionController {/api/sessions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me/:sessionId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, DELETE} route[39m[38;5;3m +1ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSubscriptionController {/api/subscriptions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/plans, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/status, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/create, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/credits/purchase, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/validate-booking/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/consume-session/:userId, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mOrganizationController {/api/organizations}:[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/create, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/subscription, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/users/add, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/users/:userId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/my/organization, GET} route[39m[38;5;3m +0ms[39m
Redis connection established
[32m[Nest] 27781  - [39m05/26/2025, 1:59:30 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +18ms[39m
Auth service is running on port 3002 and bound to all interfaces
[2J[3J[H[[90m2:00:36 PM[0m] File change detected. Starting incremental compilation...

[[90m2:00:36 PM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 28201  - [39m05/26/2025, 2:00:38 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +73ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPassportModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mThrottlerModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDiscoveryModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTerminusModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mScheduleModule dependencies initialized[39m[38;5;3m +5ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSharedModule dependencies initialized[39m[38;5;3m +43ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mEventModule dependencies initialized[39m[38;5;3m +27ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mJwtModule dependencies initialized[39m[38;5;3m +1ms[39m
query: SELECT * FROM current_schema()
query: CREATE EXTENSION IF NOT EXISTS "uuid-ossp"
query: SELECT version();
query: START TRANSACTION
query: SELECT * FROM current_schema()
query: SELECT * FROM current_database()
query: SELECT "table_schema", "table_name", obj_description(('"' || "table_schema" || '"."' || "table_name" || '"')::regclass, 'pg_class') AS table_comment FROM "information_schema"."tables" WHERE ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'payment') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session')
query: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
query: SELECT columns.*, pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description, ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype", pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type" FROM "information_schema"."columns" LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr" ON "col_attr"."attname" = "columns"."column_name" AND "col_attr"."attrelid" = ( SELECT "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls" LEFT JOIN "pg_catalog"."pg_namespace" AS "ns" ON "ns"."oid" = "cls"."relnamespace" WHERE "cls"."relname" = "columns"."table_name" AND "ns"."nspname" = "columns"."table_schema" ) WHERE ("table_schema" = 'public' AND "table_name" = 'user_session') OR ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'organization') OR ("table_schema" = 'public' AND "table_name" = 'subscription') OR ("table_schema" = 'public' AND "table_name" = 'therapy_session') OR ("table_schema" = 'public' AND "table_name" = 'payment')
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name", "am"."amname" AS "index_type" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" INNER JOIN "pg_am" "am" ON "i"."relam" = "am"."oid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'public' AND "t"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'payment'))
query: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'public' AND "cl"."relname" = 'user_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'organization') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'subscription') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'therapy_session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'payment')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='userType'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='role'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'user' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'subscription' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'therapy_session' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='status'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'payment' AND "column_name"='method'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_usertype_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_role_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'user_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'subscription_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'therapy_session_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_status_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'payment_method_enum'
query: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'typeorm_metadata'
query: COMMIT
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmCoreModule dependencies initialized[39m[38;5;3m +206ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTypeOrmModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSubscriptionModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mOrganizationModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSessionModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/api}:[39m[38;5;3m +107ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/health, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/ping, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/test-login, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthController {/api/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/register, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/verify-email, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/login, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/refresh-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/logout, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/change-password, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/forgot-password, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/reset-password, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-token, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate-service-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/revoke-token, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/users/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mMfaController {/api/mfa}:[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/generate, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/enable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/disable, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/mfa/verify, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserController {/api/users}:[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/users/:id/deactivate, PUT} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSessionController {/api/sessions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me/:sessionId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/me, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/sessions/user/:userId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSubscriptionController {/api/subscriptions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/plans, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/status, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/create, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/credits/purchase, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/validate-booking/:userId, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/subscriptions/consume-session/:userId, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mOrganizationController {/api/organizations}:[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/create, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/subscription, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/payment/:paymentId/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/users/add, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId/users/:userId, DELETE} route[39m[38;5;3m +1ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/:organizationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/organizations/my/organization, GET} route[39m[38;5;3m +0ms[39m
Redis connection established
[32m[Nest] 28201  - [39m05/26/2025, 2:00:39 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +66ms[39m
Auth service is running on port 3002 and bound to all interfaces
